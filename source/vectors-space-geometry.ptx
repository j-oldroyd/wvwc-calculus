<?xml version="1.0" encoding="UTF-8" ?>

<!--********************************************************************

*********************************************************************-->
<!-- This file was originally part of the book     -->
<!-- (as copied on 2015/07/12)                     -->
<!--                                               -->
<!--   Abstract Algebra: Theory and Applications   -->
<!--                                               -->
<!-- Copyright (C) 1997-2014  Thomas W. Judson     -->

<chapter xml:id="vectors-space-geometry" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Vectors and Euclidean Space</title>
  <introduction>
    <p>
      Our main goal now is to extend the concepts of calculus into multiple dimensions. We start by considering the three-dimensional space <m>\RR^{3}</m>.
    </p>
  </introduction>
  <section xml:id="section-coordinates-in-3-space">
    <title>Coordinates in 3-Space</title>
    <subsection xml:id="xyz-coordinates">
      <title><m>xyz</m>-coordinates</title>
      <p>
        We're used to Cartesian coordinates in the plane: each point in the plane can be represented by an <m>x</m>-coordinate and a <m>y</m>-coordinate.
        This representation is determined by the <term>coordinate axes</term> (the <m>x</m>- and <m>y</m>-axes).
        There's nothing preventing us from doing the same for three dimensions.
        We'll just need three coordinate axes: the <m>x</m>-, <m>y</m>- and <m>z</m>-axes.
        We typically view the <m>xy</m>-plane as horizontal, and the <m>z</m>-axis as vertical, but there's no mathematical preference either way.
      </p>
      <p>
        Just as the <m>x</m>- and <m>y</m>-axes determined the <m>xy</m>-plane, we can also get the <m>xz</m>- and <m>yz</m>-planes.
        These planes divide space into eight <term>octants</term>.
        And just as any point in the <m>xy</m>-plane can be represented by measuring along the <m>x</m>-axis and <m>y</m>-axis to get a point <m>(x,y)</m>, we can do the same in space to get a point <m>(x,y,z)</m>.
        The set of all points like this is denoted by <m>\RR^{3}</m>, and is the <term>three-dimensional coordinate system</term>.
      </p>
      <p>
        Given any point <m>(a,b,c)</m> in <m>\RR^{3}</m>, we can find its <term>projections</term> onto any of the coordinate axes or coordinate planes without too much trouble.
        The projection onto a line or plane is the point on that line or plane that is closest to the original point <m>(a,b,c)</m>.
      </p>
      <example xml:id="example-projection">
        <title>Projection</title>
        <statement>
          <p>
            Find the projection of the point <m>(-1,3,4)</m> onto the <m>yz</m>-plane.
          </p>
        </statement>
        <solution>
          <p>
            Here's how we can find the projection of the point <m>(-1,3,4)</m> onto the <m>yz</m>-plane.
            Note that the <m>yz</m>-plane is just the set of all points with <m>x</m>-coordinate equation to <m>0</m>, so the projection of <m>(-1,3,4)</m> onto the <m>yz</m>-plane is the point <m>(0,3,4)</m>.
          </p>
        </solution>
      </example>

      <example xml:id="example-equations-in-space">
        <title>Equations in space</title>
        <statement>
          <p>
            Sketch <m>y=1</m> in <m>\RR^{3}</m>.
          </p>
        </statement>
        <solution>
          <p>
            This is just the set of all points in <m>\RR^{3}</m> of the form <m>(x,1,z)</m>.
            This forms a <term>plane</term> in <m>\RR^{3}</m>.
          </p>
        </solution>
      </example>
      <sage>
        <input>
          x,z = var('x,z')
          parametric_plot3d((x,1,z), (x,-4,4), (z,-4,4))
        </input>
      </sage>

      <example xml:id="example-more-equations-in-space">
        <title>More equations in space</title>
        <statement>
          <p>
            Sketch <m>x+y=2</m> in <m>\RR^{3}</m>.
          </p>
        </statement>
        <solution>
          <p>
            We can do so as follows.
            First, sketch <m>x+y=2</m> in the <m>xy</m>-plane, which will just be the line <m>y = 2-x</m>.
            Then the surface in <m>\RR^{3}</m> represented by <m>x+y=2</m> is actually the surface consisting of all points directly above and directly below the line <m>y=2-x</m> in the <m>xy</m>-plane.
          </p>
        </solution>
      </example>

      <example xml:id="example-intersection-of-a-sphere-and-a-plane">
        <title>Intersection of a sphere and a plane</title>
        <statement>
          <p>
            Describe the intersection of the sphere given by the equation <m>(x+2)^{2} + (y-3)^{2} + z^{2} = 9</m> with the <m>xz</m>-plane.
          </p>
        </statement>
        <solution>
          <p>
            We can do this without too much trouble if we remember that the <m>xz</m>-plane is just the set of all points with <m>y</m>-coordinate equal to <m>0</m>.
            So the intersection of this sphere with the <m>xz</m>-plane traces out the curve <m>(x+2)^{2} + (0-3)^{2} + z^{2} = 9</m> in the <m>xz</m>-plane, which is just the point <m>(-2,0,0)</m>.
          </p>
        </solution>
      </example>

      <figure xml:id="figure-sphere-xz-plane-intersection">
        <caption>Intersection of the sphere <m>(x+2)^2 + (y-3)^2 + z^2 = 9</m> with the <m>xz</m>-plane.</caption>
        <interactive xml:id="calcplot3d-sphere-xz-plane-intersection" calcplot3d="type=implicit;equation=(x+2)^2+(y-3)^2+z^2~9;cubes=16;visible=true;fixdomain=true;xmin=-5;xmax=1;ymin=0;ymax=6;zmin=-3;zmax=3;alpha=142;hidemyedges=false;view=0;format=normal;constcol=rgb(255,0,0)&amp;type=implicit;equation=y~0;cubes=16;visible=true;fixdomain=false;xmin=-5;xmax=5;ymin=-5;ymax=5;zmin=-5;zmax=5;alpha=124;hidemyedges=false;view=0;format=normal;constcol=rgb(255,0,0)&amp;type=point;point=(-2,0,0);visible=true;color=rgb(0,0,255);size=4&amp;type=window;hsrmode=0;nomidpts=true;anaglyph=-1;center=9.785420552928016,1.9381426581355918,0.6993909057450174,1;focus=0,0,0,1;up=-0.0788418191491362,0.03859848628809217,0.9961396109027705,1;transparent=false;alpha=140;twoviews=false;unlinkviews=false;axisextension=0.7;xaxislabel=x;yaxislabel=y;zaxislabel=z;edgeson=true;faceson=true;showbox=true;showaxes=true;showticks=true;perspective=true;centerxpercent=0.5;centerypercent=0.5;rotationsteps=30;autospin=true;xygrid=false;yzgrid=false;xzgrid=false;gridsonbox=true;gridplanes=true;gridcolor=rgb(128,128,128);xmin=-5;xmax=5;ymin=-5;ymax=5;zmin=-5;zmax=5;xscale=1;yscale=1;zscale=1;zcmin=-4;zcmax=4;xscalefactor=1;yscalefactor=1;zscalefactor=1;tracemode=0;keep2d=false;zoom=0.385067" variant="minimal"/>
      </figure>
    </subsection>

    <subsection xml:id="subsection-the-distance-formula">
      <title>The Distance Formula</title>
      <p>
        Recall that the distance between two points <m>P_{1}(x_{1},y_{1})</m> and <m>P_{2}(x_{2},y_{2})</m> in <m>\RR^{2}</m> (the <m>xy</m>-plane) is given by
      </p>
      <me>|P_{1}P_{2}| = d(P_{1},P_{2}) = \sqrt{(x_{1}-x_{2})^{2}+(y_{1}-y_{2})^{2}}.</me>
      <p>
        This is proved using the Pythagorean theorem. We can do the same exact thing in <m>\RR^{3}</m>!
      </p>
      <theorem xml:id="theorem-distances-in-space">
        <title>Distances in Space</title>
        <idx><h>distance formula</h><h>three dimensions</h></idx>
        <statement>
          <p>
            Let <m>P_{1}(x_{1},y_{1},z_{1})</m> and <m>P_{2}(x_{2},y_{2},z_{2})</m> be two points in <m>\RR^{3}</m>.
            Then the distance between these two points, <m>|P_{1}P_{2}| = d(P_{1},P_{2})</m>, is given by
            <me>|P_{1}P_{2}| = d(P_{1},P_{2}) = \sqrt{(x_{1}-x_{2})^{2}+(y_{1}-y_{2})^{2} + (z_{1}-z_{2})^{2}}.</me>
          </p>
        </statement>
      </theorem>
      <example xml:id="example-computing-distances">
        <title>Computing distances</title>
        <p>
          <xref ref="theorem-distances-in-space" text="type-global" /> lets us find the distance between the points <m>P(1,4,-2)</m> and <m>Q(-1,0,2)</m> as follows:
        </p>
        <me>d(P,Q) = \sqrt{4+16+16} = 6.</me>
      </example>
      <p>
        One important use of the distance formula in <m>\RR^{3}</m> is that it lets us find equations of spheres.
        The equation of a sphere of radius <m>r</m> and center <m>C(h,k,l)</m> is given by
        <me>\sqrt{(x-h)^{2}+(y-k)^{2}+(z-l)^{2}} = r,</me>
        which is more commonly written as
        <me>(x-h)^{2}+(y-k)^{2}+(z-l)^{2} = r^{2}.</me>
      </p>
      <example xml:id="example-equation-of-a-sphere">
        <title>Equation of a sphere</title>
        <p>
          The equation <m>2x^{2}+2y^{2}+2z^{2} = 8x - 24z + 4</m> represents a sphere in <m>\RR^{3}</m>. To see how, we can rearrange the equation and complete the square to get
        </p>
        <md>
          <mrow>2x^{2}+2y^{2}+2z^{2} - 8x + 24z = 4 &amp; \Rightarrow x^{2}+y^{2}+z^{2} - 4x + 12z = 2 </mrow>
          <mrow> &amp; \Rightarrow (x-2)^{2} + y^{2} + (z-6)^{2} = 2 + 4 + 36</mrow>
          <mrow> &amp; \Rightarrow (x-2)^{2} + y^{2} + (z-6)^{2} = 42.</mrow>
        </md>
        <p>
          So this equation describes a sphere of radius <m>\sqrt{42}</m> centered at <m>(2,0,6)</m>.
        </p>
      </example>

      <example xml:id="example-spherical-shells">
        <title>Spherical shells</title>
        <p>
          We can also use inequalities to describe regions in addition to equalities. For example, <m>3^2\leq x^{2}+y^{2}+z^{2}\leq 4^2</m> describes the region contained between the sphere of radius <m>3</m> and the sphere of radius <m>4</m>, both centered at the origin.
        </p>
      </example>
      <figure xml:id="figure-spherical-shells-radii-3-4">
        <caption>The spherical shells <m>x^2 + y^2 + z^2 = a^2, 3\leq a\leq 4</m>.</caption>
        <interactive xml:id="calcplot3d-spherical-shells-radii-3-4" variant="controls" aspect="3:2" calcplot3d="type=implicit;equation=x^2+y^2+z^2~a^2;cubes=16;visible=true;fixdomain=false;xmin=-5;xmax=5;ymin=-5;ymax=5;zmin=-5;zmax=5;alpha=-1;hidemyedges=false;view=0;format=normal;constcol=rgb(255,0,0)&amp;type=slider;slider=a;value=3;steps=100;pmin=3;pmax=4;repeat=true;bounce=true;waittime=1;careful=false;noanimate=false;name=-1&amp;type=window;hsrmode=0;nomidpts=false;anaglyph=-1;center=7.6331122627967956,1.981796419405057,6.148827541536563,1;focus=0,0,0,1;up=-0.4299207843228113,-0.37080228549923083,0.8232094413184324,1;transparent=true;alpha=140;twoviews=false;unlinkviews=false;axisextension=0.7;xaxislabel=x;yaxislabel=y;zaxislabel=z;edgeson=true;faceson=true;showbox=true;showaxes=true;showticks=true;perspective=true;centerxpercent=0.5;centerypercent=0.5;rotationsteps=30;autospin=true;xygrid=false;yzgrid=false;xzgrid=false;gridsonbox=true;gridplanes=true;gridcolor=rgb(128,128,128);xmin=-5;xmax=5;ymin=-5;ymax=5;zmin=-5;zmax=5;xscale=1;yscale=1;zscale=1;zcmin=-4;zcmax=4;xscalefactor=1;yscalefactor=1;zscalefactor=1;tracemode=1;tracepoint=-2.945243112740431,3,0,1;keep2d=false;zoom=0.369067"/>
      </figure>
    </subsection>
  </section>
  <section xml:id="section-vectors">
    <title>Vectors</title>
    <introduction>
      <p>
        One of our goals in this chapter is to adequately describe motion in space.
        A useful way to do this uses the concept of <term>vector</term>, which we think of as a quantity that has both direction and magnitude/length.
        A simple example would be velocity: velocity in space has a direction and also a magnitude (speed).
        We will typically denote vectors by using boldface letters such as <m>\mathbf{x}</m> or letters with a bar overhead such as <m>\bar{x}</m>.
        We represent vectors as arrows with an <term>initial point</term> and a <term>terminal point</term>:
      </p>
      <figure xml:id="figure-vector-representation">
        <image xml:id="image-vector-representation" width="20%">
          <latex-image><![CDATA[
            \begin{tikzpicture}
            \draw[->] (0,0) node[below left]{$A$} -- (3,2) node[right]{$B$};
            \end{tikzpicture}
            ]]>
          </latex-image>
        </image>
        <caption>A vector.</caption>
      </figure>
      <p>
        We say that two vectors <m>\mathbf{x},\mathbf{y}</m> are <term>equivalent</term>, or <term>equal</term>, if they have the same magnitude and direction. We write this as <m>\mathbf{x} = \mathbf{y}</m>.
      </p>
    </introduction>
    <subsection xml:id="subsection-addition-and-scalar-multiplication">
      <title>Addition and Scalar Multiplication</title>
      <p>
        Given two vectors <m>\mathbf{x} = \overrightarrow{AB},\mathbf{y}=\overrightarrow{BC}</m>, we can add them to get the new vector
      </p>
      <me>\mathbf{x}+\mathbf{y} = \overrightarrow{AC}.</me>
      <p>
        So the vector <m>\mathbf{x}+\mathbf{y}</m> is obtained by moving the tail of <m>\mathbf{y}</m> to the tip of <m>\mathbf{x}</m> and then drawing a vector from the tail of <m>\mathbf{x}</m> to the tip of <m>\mathbf{y}</m>.
      </p>
      <figure xml:id="figure-vector-addition">
        <image xml:id="image-vector-addition" width="40%">
          <latex-image><![CDATA[
            \begin{tikzpicture}
            \begin{axis}[xmin=-7,ymin=-7,xmax=7,ymax=10, hide axis]
            \coordinate (O) at (0,0);
            \coordinate (x) at (axis direction cs:1,4);
            \coordinate (y) at (axis direction cs:-2,1);

            \draw[->] (4,2)--($(4,2)+(x)$) node[midway, right]{$\mathbf{x}$};
            \draw[->] (4,1)--($(4,1)+(y)$) node[above]{$\mathbf{y}$};
            \draw[dashed, ->] (O)--($(O)+(x)$) node[midway, right]{$\mathbf{x}$};
            \draw[dashed, ->] ($(O)+(x)$) -- ($(O)+(x)+(y)$) node[midway,above]{$\mathbf{y}$};
            \draw[->] (O)--($(O)+(x)+(y)$) node[midway,left]{$\mathbf{x}+\mathbf{y}$};
            \end{axis}
            \end{tikzpicture}
            ]]>
          </latex-image>
        </image>
        <caption>Vector addition.</caption>
      </figure>
      <p>
        The sum <m>\mathbf{x}+\mathbf{y}</m> of vectors <m>\mathbf{x},\mathbf{y}</m> can be computed using either the <term>triangle law</term>, illustrated above in <xref ref="figure-vector-addition" text="type-global" />, or the similar <term>parallelogram law</term>.
        We can also scale vectors using <term>scalar multiplication</term>: if <m>\alpha</m> is a scalar<fn>In other words, a number.
      </fn> then <m>\alpha\mathbf{x}</m> is defined to be the vector that has the same direction as <m>\mathbf{x}</m> if <m>\alpha&gt;0</m> and the opposite direction if <m>\alpha&lt;0</m>, but the magnitude is rescaled by the factor <m>\alpha</m>.
    </p>
    <example xml:id="example-vector-subtraction">
      <title>Vector subtraction</title>
      <p>
        Using the previous graph, we can compute <m>2\mathbf{x}-\mathbf{y}</m>. We just need to scale the vectors properly and then add <m>2\mathbf{x}</m> to <m>-\mathbf{y}</m>.
      </p>
    </example>
  </subsection>
  <subsection xml:id="subsection-vector-components">
    <title>Vector Components</title>
    <p>
      Although it isn't too hard to add and scale vectors visually, it'll be beneficial to do the same algebraically.
      We can do so by breaking a vector down into its <term>components</term>. Consider a vector in <m>\mathbf{x}</m> in <m>\RR^{2}</m>, and suppose if we move it to the origin then the tip of the vector is at the point <m>(3,-1)</m>.
      Then the components of <m>\mathbf{x}</m> are <m>3</m> and <m>-1</m>, and we write
      <me>\mathbf{x} = \dotprod{3,-1}.</me>
    </p>
    <p>
      Note the use of brackets here, since technically we are saying that the vector <m>\mathbf{x}</m> is distinct from the point <m>(3,-1)</m>, even though they are closely related.
      We say that the <term>position vector</term> of a point is the vector whose components are the same as the coordinates of the point.
      Geometrically, the position vector of a point <m>P</m> is the vector with its tail at the origin and its tip at <m>P</m>.
    </p>
    <p>
      So any vector in <m>\RR^{2}</m> can be represented using components by <m>\mathbf{x} = \dotprod{x_{1},x_{2}}</m>.
      Similarly, any vector in <m>\RR^{3}</m> can be represented as <m>\mathbf{x} = \dotprod{x_{1},x_{2},x_{3}}</m>.
      Once you represent a vector in component form, addition and scalar multiplication is straightforward.
    </p>
    <example xml:id="example-vector-addition-with-components">
      <title>Vector addition with components</title>
      <p>
        Let <m>\mathbf{a} = \dotprod{-2,1,3}</m> and <m>\mathbf{b} = \dotprod{0,2,1}</m>. Then
      </p>
      <me>\mathbf{b}-3\mathbf{a} = \dotprod{6,-1,-8}.</me>
    </example>
    <p>
      Finding magnitudes of vectors can also be done by applying the distance formula from <xref ref="section-coordinates-in-3-space" text="type-global" /> to the components of the vectors.
      The magnitude of a vector <m>\mathbf{x}</m> is denoted by <m>|\mathbf{x}|</m> or <m>\norm{\mathbf{x}}</m>.
      For example, the magnitude of <m>\mathbf{b}-3\mathbf{a}</m> from the previous example is
      <me>\norm{\mathbf{b}-3\mathbf{a}} = \sqrt{36+1+64} = \sqrt{101}.</me>
    </p>
    <p>
      Given a vector <m>\mathbf{x} = \dotprod{x_{1},x_{2},x_{3}},</m>
      <me>\norm{\mathbf{x}} = \sqrt{x_{1}^{2}+x_{2}^{2}+x_{3}^{2}}.</me>
    </p>
    <example xml:id="example-a-vector-equation">
      <title>A vector equation</title>
      <p>
        We can use vectors to describe curves and surfaces. For example, let <m>\mathbf{r} = \dotprod{x,y,z}</m> and <m>\mathbf{r}_{0} = \dotprod{a,b,c}</m>. Let <m>r\geq0</m>. Then the set of all points <m>(x,y,z)</m> that satisfy the equation
        <me>\norm{\mathbf{r}-\mathbf{r}_{0}} = r</me>
        has a very nice description: it's just the sphere of radius <m>r</m> centered at <m>(a,b,c)</m>.
      </p>
    </example>
    <example xml:id="example-finding-position-vectors">
      <title>Finding components of vectors</title>
      <p>
        Consider the points <m>A(4,0,-2)</m> and <m>B(4,2,1)</m>. We want to find the components of the vector <m>\overrightarrow{AB}</m>. We can do this by translating <m>\overrightarrow{AB}</m> to the origin, which is done by subtracting from each coordinate of <m>B</m> the corresponding coordinate of <m>A</m>. So the vector <m>\overrightarrow{AB}</m> is given by
      </p>
      <me>\overrightarrow{AB} = \dotprod{4-4,2-0,1+2} = \dotprod{0,2,3}.</me>
    </example>

    <p>
      In general, given <m>A(x_{1},y_{1},z_{1})</m> and <m>B(x_{2},y_{2},z_{2}),</m> the vector <m>\mathbf{x} = \overrightarrow{AB}</m> is given by
    </p>
    <me>\mathbf{x} = \dotprod{x_{2}-x_{1},y_{2}-y_{1},z_{2}-z_{1}}.</me>
    <theorem xml:id="theorem-properties-of-vector-addition-and-scalar-multiplication">
      <title>Properties of Vector Addition and Scalar Multiplication</title>
      <idx><h>vectors</h><h>properties of vector addition and scalar multiplication</h></idx>
      <statement>
        <p>
          Let <m>\mathbf{x},\mathbf{y},\mathbf{z}</m> be vectors and let <m>\alpha,\beta</m> be scalars. Then the following are true:
        </p>
        <ol cols="2">
          <li><p>
            <m>\mathbf{x}+\mathbf{y} = \mathbf{y}+\mathbf{x}</m>.
          </p></li>
          <li><p>
            <m>\mathbf{x}+(\mathbf{y}+\mathbf{z}) = (\mathbf{x}+\mathbf{y})+\mathbf{z}.</m>
          </p></li>
          <li><p>
            <m>\mathbf{x}+\mathbf{0} = \mathbf{x}.</m>
          </p></li>
          <li><p>
            <m>\mathbf{x}+(-\mathbf{x}) = \mathbf{0}.</m>
          </p></li>
          <li><p>
            <m>\alpha(\mathbf{x}+\mathbf{y}) = \alpha\mathbf{x}+\alpha\mathbf{y}.</m>
          </p></li>
          <li><p>
            <m>(\alpha+\beta)\mathbf{x} = \alpha\mathbf{x}+\beta\mathbf{y}</m>
          </p></li>.
          <li><p>
            <m>(\alpha\beta)\mathbf{x} = \alpha(\beta)\mathbf{x}.</m>
          </p></li>
          <li><p>
            <m>1\mathbf{x} = \mathbf{x}.</m>
          </p></li>
        </ol>
      </statement>
    </theorem>
  </subsection>
  <subsection xml:id="subsection-basis-vectors-and-unit-vectors">
    <title>Basis Vectors and Unit Vectors</title>
    <p>
      Every vector in <m>\RR^{3}</m> can be written using three components: <m>\mathbf{x} = \dotprod{x_{1},x_{2},x_{3}}.</m> Each component corresponds to a coordinate axis, and we can rewrite <m>\mathbf{x}</m> as a <term>linear combination</term> of three different vectors, with each vector corresponding to a coordinate axis:
    </p>
    <me>\mathbf{x} = x_{1}\dotprod{1,0,0}+x_{2}\dotprod{0,1,0}+x_{3}\dotprod{0,0,1}.</me>
    These vectors are important enough that we'll give them a name: the <term>standard basis vectors</term>.
    <definition xml:id="definition-standard-basis-vectors">
      <title>Standard Basis Vectors</title>
      <idx><h>vectors</h><h>standard basis</h></idx>
      <statement>
        <p>
          The standard basis for <m>\RR^{3}</m> is the set <m>\{\mathbf{i},\mathbf{j},\mathbf{k}\}</m>, where
        </p>
        <me>\mathbf{i} = \dotprod{1,0,0},\quad\mathbf{j} = \dotprod{0,1,0}\quad\text{and}\quad\mathbf{k} = \dotprod{0,0,1}.</me>
      </statement>
    </definition>
    <p>
      As we've seen, every vector <m>\mathbf{x}</m> in <m>\RR^{3}</m> can be expressed using only these three vectors. The standard basis has two important properties: it is perpendicular (also called <term>orthogonal</term>) and every vector in the collection has magnitude <m>1</m>. In other words,
    </p>
    <me>\norm{\mathbf{i}} = \norm{\mathbf{j}} = \norm{\mathbf{k}} = 1.</me>
    <p>
      These vectors are essentially designed to capture the "coordinate directions", and are plotted below.
    </p>
    <figure xml:id="figure-standard-basis">
      <image xml:id="image-standard-basis" width="60%">
        <latex-image><![CDATA[
          \begin{tikzpicture} [axis/.style={->,blue,thick}, 
          vector/.style={-stealth,red,very thick}, 
          vector guide/.style={dashed,red,thick}]
          \begin{axis}[
          view={120}{30},
          axis lines=center,
          width=15cm,height=15cm,
          xtick={-2,-1,1,2},ytick={-2,-1,1,2},ztick={-2,-1,1,2},
          % minor tick={-12,-11,...,12},
          xmin=-3,xmax=3,ymin=-3,ymax=3,zmin=-3,zmax=3,
          xlabel={$x$},ylabel={$y$},zlabel={$z$},
          ]

          %standard tikz coordinate definition using x, y, z coords
          \coordinate (O) at (0,0,0);

          %tikz-3dplot coordinate definition using x, y, z coords

          \pgfmathsetmacro{\ax}{0.8}
          \pgfmathsetmacro{\ay}{0.8}
          \pgfmathsetmacro{\az}{0.8}

          % \coordinate (P) at (\ax,\ay,\az);

          % %draw axes
          \draw[axis] (0,0,0) -- (1,0,0) node[anchor=north east]{$\mathbf{i}$};
          \draw[axis] (0,0,0) -- (0,1,0) node[anchor=north west]{$\mathbf{j}$};
          \draw[axis] (0,0,0) -- (0,0,1) node[anchor=west]{$\mathbf{k}$};

          %draw a vector from O to P
          % \draw[vector] (O) -- (P);

          %draw guide lines to components
          % \draw[vector guide]         (O) -- (\ax,\ay,0);
          % \draw[vector guide] (\ax,\ay,0) -- (P);
          % \draw[vector guide]         (P) -- (0,0,\az);
          % \draw[vector guide] (\ax,\ay,0) -- (0,\ay,0);
          % \draw[vector guide] (\ax,\ay,0) -- (0,\ay,0);
          % \draw[vector guide] (\ax,\ay,0) -- (\ax,0,0);
          % \node[anchor=east]
          % at (\ax,0,0){(\ax, 0, 0)};
          % \node[anchor=west]
          % at (0,\ay,0){(0, \ay, 0)};
          % \node[anchor=south]
          % at (0,0,\az){(0, 0, \az)};
          \end{axis}
          \end{tikzpicture}
          ]]>
        </latex-image>
      </image>
      <caption>The standard basis.</caption>
    </figure>
    <p>
      This also leads us to our next definition.
    </p>
    <definition xml:id="definition-unit-vectors">
      <title>Unit Vectors</title>
      <idx><h>vectors</h><h>unit vectors</h></idx>
      <statement>
        <p>
          A vector <m>\mathbf{x}</m> is a unit vector if <m>\norm{\mathbf{x}} = 1</m>.
        </p>
      </statement>
    </definition>
    <p>
      Unit vectors are useful if we just need to indicate a direction, and we don't care about magnitude. Every nonzero vector can be rescaled to a unit vector: just divide the vector by its norm.
    </p>
    <example xml:id="example-direction-from-one-point-to-another">
      <title>Direction from one point to another</title>
      <p>
        Consider the points <m>A(1,2,-1)</m> and <m>B(0,-3,2)</m>. Then we can find the unit vector indicating the direction from <m>A</m> to <m>B</m>. First, set
      </p>
      <me>\mathbf{x} = \overrightarrow{AB} = \dotprod{-1,-5,3}.</me>
      <p>
        Then the unit vector that gives the direction from <m>A</m> to <m>B</m> is given by
      </p>
      <md>
        <mrow>\mathbf{u} &amp; = \frac{\mathbf{x}}{\norm{\mathbf{x}}} </mrow>
        <mrow> &amp; = \frac{\dotprod{-1,-5,3}}{\sqrt{1+25+9}} </mrow>
        <mrow> &amp; = \dotprod{-\frac{1}{\sqrt{37}}, -\frac{5}{\sqrt{37}}, \frac{3}{\sqrt{37}}}. </mrow>
      </md>
    </example>
    <example xml:id="example-a-vector-equation-for-the-unit-sphere">
      <title>A vector equation for the unit sphere</title>
      <p>
        Using the concept of a unit vector, we can very easily describe the unit sphere<fn>The sphere of radius <m>1</m> centered at the origin.</fn> using a vector equation. If we set <m>\mathbf{r} = (x,y,z)</m>, then the unit sphere is just the set of all solutions of
      </p>
      <me>\norm{\mathbf{r}} = 1.</me>
    </example>
  </subsection>
  <subsection xml:id="subsection-applications">
    <title>Applications</title>
    <p>
      Many physical quantities have both a direction and a magnitude, like velocity, acceleration and forces. Vectors are ideally suited to measure these quantities.
    </p>
    <example xml:id="example-weight-of-a-chain">
      <title>Weight of a chain</title>
      <p>
        A still chain is fixed to two ends of a level divide. The tension of the chain at each fixed end can be represented by vectors pointing away from the chain. Call these tension forces <m>\mathbf{T}_{1}</m> and <m>\mathbf{T}_{2}</m>. Suppose we know that each force vector makes an angle of <m>45^{\circ}</m> with the ground on either side of the chain's fixed ends, and that the magnitude of each tension is <quantity><mag>43</mag><unit base="newton"/></quantity>. Then we can use vector addition to find the weight of the chain.
      </p>
      <p>
        Let <m>\mathbf{w}</m> denote the weight of the chain considered as a vector (so that it's pointing down). Since the chain is still, its <term>resultant</term><fn>The sum of all forces acting on the chain.</fn> must be <m>\mathbf{0}</m>. So we can say that
      </p>
      <me>\mathbf{T}_{1}+\mathbf{T}_{2} + \mathbf{w} = \mathbf{0}</me>
      <p>
        or in other words
      </p>
      <me>\mathbf{w} = -\mathbf{T}_{1}-\mathbf{T}_{2}.</me>
      <p>
        What we need to find is <m>\norm{\mathbf{w}}</m>, which we can do without too much trouble if we can rewrite the tension vectors in component form. In fact, we have
      </p>
      <md>
        <mrow>\mathbf{T}_{1} &amp; = \dotprod{-\norm{\mathbf{T}_{1}}\cos45^{\circ},\norm{\mathbf{T}_{1}}\sin45^{\circ}} </mrow>
        <mrow>\mathbf{T}_{2} &amp; = \dotprod{\norm{\mathbf{T}_{2}}\cos45^{\circ},\norm{\mathbf{T}_{2}}\sin45^{\circ}} </mrow>
      </md>
      <p>
        So it follows that
      </p>
      <md>
        <mrow>\norm{\mathbf{w}} &amp; = \norm{-\mathbf{T}_{1}-\mathbf{T}_{2}} </mrow>
        <mrow> &amp; = \norm{\dotprod{0,-2\cdot43\frac{\sqrt{2}}{2}}}</mrow>
        <mrow> &amp; = 43\sqrt{2} </mrow>
      </md>
      <p>
        Therefore the chain weighs <m>43\sqrt{2}</m><quantity><unit base="newton"/></quantity>.
      </p>
    </example>
  </subsection>
</section>
<section xml:id="section-the-dot-product">
  <title>The Dot Product</title>
  <subsection xml:id="subsection-definition-and-properties-of-the-dot-product">
    <title>Definition and Properties of the Dot Product</title>
    <p>
      Suppose we're given two vectors. What we'd like to do is to come up with a measure of how much these vectors overlap.
      Such a measure may be useful for determining if forces are too close together, for example.
      So consider two vectors <m>\mathbf{x} = \dotprod{x_{1},y_{1},z_{1}}</m> and <m>\mathbf{y} = \dotprod{x_{2},y_{2},z_{2}}</m> as in the following diagram.
    </p>
    <figure xml:id="figure-vector-dot-product">
      <image xml:id="image-vector-dot-product" width="40%">
        <latex-image><![CDATA[
          \begin{tikzpicture}
          \begin{axis}[xmin=-7,ymin=-7,xmax=7,ymax=7, hide axis]
          \coordinate (O) at (0,0);
          \coordinate (x) at (axis direction cs:1,4);
          \coordinate (y) at (axis direction cs:-2,1);

          \draw[->] (2,2)--($(2,2)+(x)$) node[midway, right]{$\mathbf{x}$};
          \draw[->] (1,1)--($(1,1)+(y)$) node[above]{$\mathbf{y}$};
          \end{axis}
          \end{tikzpicture}
          ]]>
        </latex-image>
      </image>
      <caption>Vector overlap.</caption>
    </figure>
    <p>
      One way we can measure how much <m>\mathbf{x}</m> and <m>\mathbf{y}</m> overlap is to find <m>\norm{\mathbf{x}+\mathbf{y}}</m>, or equivalently <m>\norm{\mathbf{x}+\mathbf{y}}^{2},</m> since this is larger if <m>\mathbf{x}</m> and <m>\mathbf{y}</m> are more closely aligned.<fn>We are carefully ignoring the case where <m>\mathbf{x}</m> and <m>\mathbf{y}</m> point in opposite directions...</fn> From <xref ref="subsection-vector-components" text="title" />, we know that
    </p>
    <me>\norm{\mathbf{x}+\mathbf{y}}^{2} = (x_{1}+x_{2})^{2} + (y_{1}+y_{2})^{2} + (z_{1}+z_{2})^{2}.</me>
    <p>
      This simplifies out to
    </p>
    <md>
      <mrow>\norm{\mathbf{x}+\mathbf{y}}^{2} &amp; = (x_{1}+x_{2})^{2} + (y_{1}+y_{2})^{2} + (z_{1}+z_{2})^{2} </mrow>
      <mrow> &amp; = (x_{1}^{2}+y_{1}^{2}+z_{1}^{2}) + 2(x_{1}x_{2} + y_{1}y_{2} + z_{1}z_{2}) + (x_{2}^{2} + y_{2}^{2} + z_{2}^{2}) </mrow>
      <mrow> &amp; = \norm{\mathbf{x}}^{2} + 2(x_{1}x_{2} + y_{1}y_{2} + z_{1}z_{2}) + \norm{\mathbf{y}}^{2}. </mrow>
    </md>
    <p>
      The only part of this that could possibly depend on how closely <m>\mathbf{x}</m> and <m>\mathbf{y}</m> overlap is the middle term <m>2(x_{1}x_{2}+y_{1}y_{2}+z_{1}z_{2})</m>. So we'll (optimistically... for now) take what's inside the parentheses and use it as the measure we're looking for.
    </p>
    <definition xml:id="definition-the-dot-product">
      <title>The Dot Product</title>
      <idx><h>dot product</h><h>definition</h></idx>
      <statement>
        <p>
          Let <m>\mathbf{x} = \dotprod{x_{1},y_{1},z_{1}}</m> and <m>\mathbf{y} = \dotprod{x_{2},y_{2},z_{2}}</m>. The <term>dot product</term> of <m>\mathbf{x}</m> with <m>\mathbf{y}</m>, denoted <m>\mathbf{x}\cdot\mathbf{y},</m> is given by
        </p>
        <me>\mathbf{x}\cdot\mathbf{y} = x_{1}x_{2}+y_{1}y_{2}+z_{1}z_{2}.</me>
      </statement>
    </definition>
    <p>
      The dot product is also sometimes called the <term>scalar product</term> (since it always produces a scalar) or the <term>inner product</term> in other settings.
    </p>
    <example xml:id="example-computing-dot-products">
      <title>Computing dot products</title>
      <p>
        Let <m>\mathbf{x} = \dotprod{1,3,-1},\mathbf{y} = \dotprod{-3,1,0}</m> and <m>\mathbf{z} = \dotprod{1,1,1}</m>. Then
      </p>
      <me>\mathbf{x}\cdot\mathbf{z} = 1+3-1 = 3\quad\text{and}\quad\mathbf{x}\cdot\mathbf{y} = -3+3+0 = 0.</me>
      <p>
        It also doesn't matter what order we take the vectors in for the dot product: we get the same answer regardless. However, it does matter that we only use two vectors. The dot product takes two vectors and gives a scalar. In other words, <em>it is impossible to take the dot product of more than two vectors at a time!</em> So quantities such as <m>\mathbf{x}\cdot\mathbf{y}\cdot\mathbf{z}</m> are not meaningful.
      </p>
    </example>
    <theorem xml:id="theorem-properties-of-the-dot-product">
      <title>Properties of the Dot Product</title>
      <idx><h>dot product</h><h>properties</h></idx>
      <statement>
        <p>
          Let <m>\mathbf{x},\mathbf{y}</m> and <m>\mathbf{z}</m> be vectors, and let <m>\alpha</m> be a scalar. Then the following properties hold:
        </p>
        <ol cols="2">
          <li><p>
            <m>\mathbf{x}\cdot\mathbf{x} = \norm{\mathbf{x}}^{2}.</m>
          </p></li>
          <li><p>
            <m>\mathbf{x}\cdot\mathbf{y} = \mathbf{y}\cdot\mathbf{x}.</m>
          </p></li>
          <li><p>
            <m>\mathbf{x}\cdot(\mathbf{y}+\mathbf{z}) = \mathbf{x}\cdot\mathbf{y}+\mathbf{x}\cdot\mathbf{z}.</m>
          </p></li>
          <li><p>
            <m>(\alpha\mathbf{x})\cdot\mathbf{y} = \alpha(\mathbf{x}\cdot\mathbf{y}) = \mathbf{x}\cdot(\alpha\mathbf{y}).</m>
          </p></li>
          <li><p>
            <m>\mathbf{0}\cdot\mathbf{x} = 0.</m>
          </p></li>
        </ol>
      </statement>
    </theorem>
    <p>
      Our goal was to define a measure for how much two given vectors align, or are correlated. The following result tells us that the dot product is actually a reasonable measure of this.
    </p>
    <theorem xml:id="theorem-geometry-of-the-dot-product">
      <title>Geometry of the Dot Product</title>
      <idx><h>dot product</h><h>geometry</h></idx>
      <statement>
        <p>
          Let <m>\mathbf{a}</m> and <m>\mathbf{b}</m> denote vectors, and let <m>0\leq\theta\leq\pi</m> denote the angle between these vectors if the tails of both are moved to the origin. Then
        </p>
        <me>\mathbf{a}\cdot\mathbf{b} = \norm{\mathbf{a}}\norm{\mathbf{b}}\cos\theta.</me>
      </statement>
    </theorem>
    <proof>
      <p>
        Place both vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m> at the origin, and then draw the vector <m>\mathbf{a}-\mathbf{b}</m> from the tip of <m>\mathbf{b}</m> to the tip of <m>\mathbf{a}</m>, like so:
      </p>
      <figure xml:id="figure-dot-product-geometry">
        <image xml:id="image-dot-product-geometry" width="60%">
          <latex-image><![CDATA[
            \begin{tikzpicture} [axis/.style={->,blue,thick}, 
            vector/.style={-stealth,red,very thick}, 
            vector guide/.style={dashed,red,thick}]
            \begin{axis}[
            view={120}{30},
            axis lines=center,
            width=15cm,height=15cm,
            xtick=\empty,ytick=\empty,ztick=\empty,
            % minor tick={-12,-11,...,12},
            xmin=-3,xmax=3,ymin=-3,ymax=3,zmin=-3,zmax=3,
            xlabel={$x$},ylabel={$y$},zlabel={$z$},
            ]

            %standard tikz coordinate definition using x, y, z coords
            \coordinate (O) at (0,0,0);
            \coordinate (a) at (0,2,2);
            \coordinate (b) at (-1,2,-1);

            % Label origin
            \draw (O) node[above left]{$O$};

            % Draw a,b
            \draw[vector] (O)--(a) node[pos=1.1]{$\mathbf{a}$};
            \draw[vector] (O)--(b) node[pos=1.1]{$\mathbf{b}$};
            \draw[vector] (b)--(a) node[midway, above right]{$\mathbf{a}-\mathbf{b}$};

            % Draw angle between a,b
            \begin{scope}
            \clip (a)--(O)--(b) -- cycle;
            \draw[<->, dashed] (O) circle (.8cm) node[right,xshift=6pt,yshift=2.5pt]{$\theta$};
            \end{scope}

            \end{axis}
            \end{tikzpicture}
            ]]>
          </latex-image>
        </image>
        <caption>Geometry of the dot product.</caption>
      </figure>
      <p>
        Then <m>\mathbf{a},\mathbf{b}</m> and <m>\mathbf{a}-\mathbf{b}</m> form a triangle. We want to relate the dot product <m>\mathbf{a}\cdot\mathbf{b}</m> with the angle <m>\theta</m>, so we'll start by using the Law of Cosines to get an equation involving <m>\theta</m>. The Law of Cosines states that
      </p>
      <men xml:id="equation-law-of-cosines">\norm{\mathbf{a}-\mathbf{b}}^{2} = \norm{\mathbf{a}}^{2}+\norm{\mathbf{b}}^{2} -2\norm{\mathbf{a}}\norm{\mathbf{b}}\cos\theta.</men>
      <p>
        Here's where the dot product comes in. Each squared magnitude can be rewritten as a dot product using <xref ref="theorem-properties-of-the-dot-product" text="type-global" />, so in particular we have
      </p>
      <me>\norm{\mathbf{a}-\mathbf{b}}^{2} = (\mathbf{a}-\mathbf{b})\cdot(\mathbf{a}-\mathbf{b}) = \norm{\mathbf{a}}^{2}-2(\mathbf{a}\cdot\mathbf{b}) + \norm{\mathbf{b}}^{2}.</me>
      <p>
        Plugging this into <xref ref="equation-law-of-cosines" /> gives us the following:
      </p>
      <me>\norm{\mathbf{a}}^{2}-2(\mathbf{a}\cdot\mathbf{b})+\norm{\mathbf{b}}^{2} = \norm{\mathbf{a}}^{2}+\norm{\mathbf{b}}^{2} - 2\norm{\mathbf{a}}\norm{\mathbf{b}}\cos\theta</me>
      <p>
        Which finally simplifies down to
      </p>
      <me>\mathbf{a}\cdot\mathbf{b} = \norm{\mathbf{a}}\norm{\mathbf{b}}\cos\theta.</me>
    </proof>
    <remark>
      <p>
        It's usually easier to use <xref ref="definition-the-dot-product" text="type-global" /> to compute dot products. However, <xref ref="theorem-geometry-of-the-dot-product" text="type-global" /> gives us extremely useful geometric information about the dot product. For example, we get the following result very quickly: two vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m> are perpendicular if and only if <m>\mathbf{a}\cdot\mathbf{b} = 0</m>.
      </p>
    </remark>
    <example xml:id="example-checking-orthogonality-using-the-dot-product">
      <title>Checking orthogonality using the dot product</title>
      <p>
        Let <m>\mathbf{a} = \dotprod{0,1,-3}</m> and <m>\mathbf{b} = \dotprod{1,1,2}.</m> Then we can say right away that these vectors are <em>not</em> orthogonal to each other since <m>\mathbf{a}\cdot\mathbf{b} = -5 \neq 0</m>.
      </p>
    </example>
    <example xml:id="example-finding-angles-between-lines">
      <title>Finding angles between lines</title>
      <p>
        Consider the lines <m>x+2y = 7</m> and <m>5x-y = 2</m> in <m>\RR^{2}</m>, plotted below:
      </p>
      <figure xml:id="figure-angle-between-lines">
        <image xml:id="image-angle-between-lines" width="80%">
          <latex-image><![CDATA[
            \begin{tikzpicture}
            \begin{axis}[myaxis, xmin = -6, xmax = 6, ymin = -6, ymax = 6, legend pos = south east]
            \addplot[blue]{(7-x)/2};
            \addlegendentry{$x+2y=7$};
            \addplot[green!60!blue!40]{5*x+2};
            \addlegendentry{$5x-y=2$};

            % Intersection and related points
            \coordinate (intersect) at (1,3);
            \coordinate (p1) at (5,1);
            \coordinate (p2) at (2,8);

            % Draw angle between lines
            \begin{scope}
            \clip (p1)--(intersect)--(p2) -- cycle;
            \draw[<->, dashed] (intersect) circle (4cm) node[right,xshift=-2pt,yshift=7.5pt]{$\theta$};
            \end{scope}
            \end{axis}
            \end{tikzpicture}
            ]]>
          </latex-image>
        </image>
        <caption>Angle between lines.</caption>
      </figure>
      <p>
        Suppose we want to find the acute angle <m>\theta</m> these lines make with each other. We can do so by finding vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m> that point in the same directions as these lines. We'll start by finding the vector <m>\mathbf{a}</m> which points in the same direction as the line <m>x+2y=7</m>. To do so, we need two points on this line: <m>A_{1} = (7,0)</m> and <m>A_{2} = (5,1)</m>. So we can take <m>\mathbf{a}</m> to be
      </p>
      <me>\mathbf{a} = \overrightarrow{A_{1}A_{2}} = \dotprod{-2,1}.</me>
      <p>
        Similarly, since <m>B_{1} = (0,-2)</m> and <m>B_{2} = (1,3)</m> both lie on <m>5x-y = 2</m>, we can take
      </p>
      <me>\mathbf{b} = \overrightarrow{B_{1}B_{2}} = \dotprod{1,5}.</me>
      <p>
        Then by <xref ref="theorem-geometry-of-the-dot-product" text="type-global" /> we know that
      </p>
      <me>\cos\theta = \frac{\mathbf{a}\cdot\mathbf{b}}{\norm{\mathbf{a}}\norm{\mathbf{b}}} = \frac{3}{\sqrt{5}\sqrt{26}} = \frac{3}{\sqrt{130}}.</me>
      <p>
        So the acute angle between these two lines is given by
      </p>
      <me>\theta = \cos^{-1}\frac{3}{\sqrt{130}}.</me>
    </example>
  </subsection>
  <subsection xml:id="subsection-projections">
    <title>Projections</title>
    <p>
      Consider two vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m> arranged as follows:
    </p>
    <figure xml:id="figure-orthogonal-projection-1">
      <image xml:id="image-orthogonal-projection-1" width="60%">
        <latex-image><![CDATA[
          \begin{tikzpicture}[vector/.style={-stealth,blue,very thick}]
          \begin{axis}[xmin = -6, xmax = 6, ymin = -6, ymax = 6, hide axis]

          \coordinate (p1) at (3,4);
          \coordinate (p2) at (5,0);
          \coordinate (O) at (0,0);

          \draw[vector] (O)--(p1) node[pos=1.1]{$\mathbf{a}$};
          \draw[vector] (O)--(p2) node[pos=1.1]{$\mathbf{b}$};
          \end{axis}
          \end{tikzpicture}
          ]]>
        </latex-image>
      </image>
      <caption>The vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m>.</caption>
    </figure>
    <p>
      Now draw a line from the tip of <m>\mathbf{a}</m> to the point on <m>\mathbf{b}</m> that is closest to the tip of <m>\mathbf{a}</m>; such a line must be orthogonal to <m>\mathbf{b}</m>. This point on <m>\mathbf{b}</m> defines a new vector that we call the <term>projection of <m>\mathbf{a}</m> onto <m>\mathbf{b}</m></term>; we denote this vector by <m>\proj{\mathbf{b}}{\mathbf{a}}</m>.
    </p>
    <figure xml:id="figure-orthogonal-projection-2">
      <image xml:id="image-orthogonal-projection-2" width="60%">
        <latex-image><![CDATA[
          \begin{tikzpicture}[vector/.style={-stealth,blue,very thick}]
          \begin{axis}[xmin = -6, xmax = 6, ymin = -6, ymax = 6, hide axis]

          \coordinate (p1) at (3,4);
          \coordinate (p2) at (5,0);
          \coordinate (O) at (0,0);
          \coordinate (proj) at ($(O)!(p1)!(p2)$);

          \draw[vector] (O)--(p1) node[pos=1.1]{$\mathbf{a}$};
          \draw[vector] (O)--(p2) node[pos=1.1]{$\mathbf{b}$};

          % Drop projection
          \draw[dashed] (proj)--(p1);
          \draw[vector,green!60!blue!40] (O)--(proj) node[below]{$\proj{\mathbf{b}}{\mathbf{a}}$};

          \end{axis}
          \end{tikzpicture}
          ]]>
        </latex-image>
      </image>
      <caption>The projection of <m>\mathbf{a}</m> onto <m>\mathbf{b}</m>.</caption>
    </figure>
    <p>
      The projection <m>\proj{\mathbf{b}}{\mathbf{a}}</m> can be thought of as the vector parallel to <m>\mathbf{b}</m> that best approximates <m>\mathbf{a}</m>. What we'd like to do now is to actually find a formula for this projection. If we let <m>\theta</m> denote the acute angle between the vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m>, then
    </p>
    <me>\norm{\proj{\mathbf{b}}{\mathbf{a}}} = \norm{\mathbf{a}}\cos\theta.</me>
    <p>
      Since the projection must also be parallel to <m>\mathbf{b}</m>, then this is enough information to state exactly what <m>\proj{\mathbf{b}}{\mathbf{a}}</m> should be: <m>\proj{\mathbf{b}}{\mathbf{a}} = (\norm{\mathbf{a}}\cos\theta)\frac{\mathbf{b}}{\norm{\mathbf{b}}}.</m> We can simplify this formula somewhat by making use of <xref ref="theorem-geometry-of-the-dot-product" text="type-global" />.
    </p>
    <theorem xml:id="theorem-vector-projection-formulas">
      <title>Vector Projection Formulas</title>
      <idx><h>vectors</h><h>vector projection</h></idx>
      <statement>
        <p>
          Let <m>\mathbf{a}</m> and <m>\mathbf{b}</m> denote vectors in <m>\RR^{2}</m> or <m>\RR^{3}</m>. Then the projection of <m>\mathbf{a}</m> onto <m>\mathbf{b}</m> is given by
        </p>
        <me>\proj{\mathbf{b}}{\mathbf{a}} = \frac{\mathbf{a}\cdot\mathbf{b}}{\mathbf{b}\cdot\mathbf{b}}\mathbf{b}.</me>
      </statement>
    </theorem>
    <example xml:id="example-finding-vector-projections">
      <title>Finding vector projections</title>
      <p>
        Let <m>\mathbf{a} = \dotprod{1,4}</m> and <m>\mathbf{b} = \dotprod{2,3}</m>. Then by <xref ref="theorem-vector-projection-formulas" text="type-global" /> the projection of <m>\mathbf{a}</m> onto <m>\mathbf{b}</m> is given by
      </p>
      <me>\proj{\mathbf{b}}{\mathbf{a}} = \frac{\mathbf{a}\cdot\mathbf{b}}{\mathbf{b}\cdot\mathbf{b}}\mathbf{b} = \frac{14}{13}\dotprod{2,3}.</me>
    </example>
    <p>
      Another example of vector projection is computing work done by a force. In particular, suppose we have a force <m>\mathbf{F}</m> and some displacement vector <m>\mathbf{D}</m>. We define the work done by <m>\mathbf{F}</m> along <m>\mathbf{D}</m> to be the product of the component of <m>\mathbf{F}</m> along <m>\mathbf{D}</m> times the distance moved. If we let <m>\theta</m> denote the acute angle between <m>\mathbf{F}</m> and <m>\mathbf{D}</m>, then the work <m>W</m> done is given by
    </p>
    <me>W = (\norm{\mathbf{F}}\cos\theta)\norm{\mathbf{D}},</me>
    <p>
      which is exactly equal to <m>\mathbf{F}\cdot\mathbf{D}</m> by <xref ref="theorem-geometry-of-the-dot-product" text="type-global" />.
    </p>
    <example xml:id="example-finding-work-done-by-a-force">
      <title>Finding work done by a force</title>
      <p>
        Suppose a force <m>\mathbf{F} = 2\mathbf{i}-3\mathbf{j}+\mathbf{k}</m> moves a particle from the point <m>(2,3,-1)</m> to the point <m>(1,0,-3)</m>, where the force is measured in newtons and the distance in meters. We want to find the work done by this force on the particle. To do so, we need the displacement <m>\mathbf{D}</m>:
      </p>
      <me>\mathbf{D} = \dotprod{1-2,0-3,-3-(-1)} = \dotprod{-1,-3,-2}.</me>
      <p>
        So the work done is
      </p>
      <me>W = \mathbf{F}\cdot\mathbf{D} = -2+9-2 = 5</me>
      <p>
        joules.
      </p>
    </example>
  </subsection>
</section>
<section xml:id="section-the-cross-product">
  <title>The Cross Product</title>
  <introduction>
    <p>
      The dot product, and in particular <xref ref="theorem-geometry-of-the-dot-product" text="type-global" />, gives us a good way to tell if two vectors are perpendicular.
      However, it says nothing about how to <em>construct</em> perpendicular vectors.
      The next vector operation, the <term>cross product</term>, is the tool we'll use for that goal.
    </p>
  </introduction>
  <subsection xml:id="subsection-definition-and-properties-of-the-cross-product">
    <title>Definition and Properties of the Cross Product</title>
    <definition xml:id="definition-the-cross-product">
      <idx><h>cross product</h><h>definition</h></idx>
      <title>The Cross Product</title>
      <statement>
        <p>
          Let <m>\mathbf{x} = \dotprod{x_{1},y_{1},z_{1}}</m> and <m>\mathbf{y} = \dotprod{x_{2},y_{2},z_{2}}</m>. Then the cross product of <m>\mathbf{x}</m> with <m>\mathbf{y}</m> is the new vector <m>\mathbf{x}\times\mathbf{y}</m> given by
        </p>
        <me>\mathbf{x}\times\mathbf{y} = \dotprod{y_{1}z_{2}-z_{1}y_{2}, z_{1}x_{2}-x_{1}z_{2}, x_{1}y_{2} - y_{1}x_{2}}.</me>
      </statement>
    </definition>
    <example xml:id="example-cross-product-of-basis-vectors">
      <title>Cross product of basis vectors</title>
      <p>
        Let's start by computing <m>\mathbf{i}\times\mathbf{k}</m> using the definition. If we do so, we have
      </p>
      <me>\mathbf{i}\times\mathbf{k} = \dotprod{0,-1,0} = -\mathbf{j}.</me>
      <p>
        On the other hand, we also have <m>\mathbf{k}\times\mathbf{i} = \mathbf{j}</m>. This points out the very important fact that <em>order matters for cross products</em>.
      </p>
    </example>
    <p>
      This formula is a lot to remember, so it's beneficial to find another way to express it. One way is by using <term>determinants</term>. In particular, if <m>\mathbf{x} = \dotprod{x_{1},y_{1},z_{1}}</m> and <m>\mathbf{y} = \dotprod{x_{2},y_{2},z_{2}}</m>, then
    </p>
    <men xml:id="equation-cross-product-determinant">\mathbf{x}\times\mathbf{y} = \left|\begin{array}{ccc}
      \mathbf{i} &amp; \mathbf{j} &amp; \mathbf{k} \\ x_{1} &amp; y_{1} &amp; z_{1} \\ x_{2} &amp; y_{2} &amp; z_{2} \end{array}\right|</men>
      <example xml:id="example-another-cross-product">
        <title>Another cross product</title>
        <p>
          <xref ref="equation-cross-product-determinant" text="type-global" /> is useful to use if you're dealing with vectors that aren't as simple as the basis vectors <m>\mathbf{i},\mathbf{j},\mathbf{k}</m>. For example, let <m>\mathbf{a} = \dotprod{-1,2,0}</m> and <m>\mathbf{b} = \dotprod{2,4,1}</m>. Then
        </p>
        <md>
          <mrow>\mathbf{a}\times\mathbf{b} &amp; = \left|\begin{array}{ccc}
            \mathbf{i} &amp; \mathbf{j} &amp; \mathbf{k} \\
            -1 &amp; 2 &amp; 0 \\
            2 &amp; 4 &amp; 1 \end{array}\right| </mrow>
            <mrow> &amp; = \mathbf{i}\left|\begin{array}{cc} 2 &amp; 0 \\ 4 &amp; 1\end{array}\right| - \mathbf{j}\left|\begin{array}{cc} -1 &amp; 0 \\ 2 &amp; 1\end{array}\right| + \mathbf{k}\left|\begin{array}{cc} -1 &amp; 2 \\ 2 &amp; 4\end{array}\right|</mrow>
            <mrow> &amp; = 2\mathbf{i}+\mathbf{j}-8\mathbf{k}</mrow>
            <mrow> &amp; = \dotprod{2,1,-8}. </mrow>
          </md>
        </example>
        <p>
          Remember that we said the cross product is our tool for finding perpendicular vectors. So it might be nice if we made sure it actually did that. As a quick check, we'll compute <m>\mathbf{a}\cdot(\mathbf{a}\times\mathbf{b})</m> and <m>\mathbf{b}\cdot(\mathbf{a}\times\mathbf{b})</m>, with these vectors coming from <xref ref="equation-cross-product-determinant" text="type-global" />. If we do so, we obtain
        </p>
        <md>
          <mrow>\mathbf{a}\cdot(\mathbf{a}\times\mathbf{b}) &amp; = -2 + 2 = 0 </mrow>
          <mrow>\mathbf{b}\cdot(\mathbf{a}\times\mathbf{b}) &amp; = 4 + 4 - 8 = 0 </mrow>
        </md>
        <p>
          Since these dot products are zero, this means that both <m>\mathbf{a}</m> and <m>\mathbf{b}</m> are perpendicular to the cross product <m>\mathbf{a}\times\mathbf{b}</m>. This is also true in general.
        </p>
        <theorem xml:id="theorem-orthogonality-of-the-cross-product">
          <title>Orthogonality of the Cross Product</title>
          <idx><h>cross product</h><h>orthogonality</h></idx>
          <statement>
            <p>
              <m>\mathbf{a}\times\mathbf{b}</m> is always orthogonal to both <m>\mathbf{a}</m> and <m>\mathbf{b}</m>.
            </p>
          </statement>
        </theorem>
        <p>
          So the cross product always produces orthogonal vectors. To determine the direction of the cross product <m>\mathbf{a}\times\mathbf{b}</m>, we use the <term>right-hand rule</term>: sweep your right hand from <m>\mathbf{a}</m> to <m>\mathbf{b}</m> and stick your thumb up. Then <m>\mathbf{a}\times\mathbf{b}</m> is parallel to your thumb.
        </p>
        <p>
          We would also like to know the magnitude of the cross product. We can just compute it using <xref ref="definition-the-cross-product" text="type-global" /> and find the magnitude using our usual formula. If we do so, we obtain (after a lot of simplifying!)
        </p>
        <me>\norm{\mathbf{a}\times\mathbf{b}}^{2} = \norm{\mathbf{a}}^{2}\norm{\mathbf{b}}^{2}\sin^{2}\theta,</me>
        <p>
          which reduces to the following result.
        </p>
        <theorem xml:id="theorem-magnitude-of-the-cross-product">
          <title>Magnitude of the Cross Product</title>
          <idx><h>cross product</h><h>magnitude</h></idx>
          <statement>
            <p>
              Let <m>\theta</m> denote the acute angle between the vectors <m>\mathbf{a}</m> and <m>\mathbf{b}</m>, so that <m>0\leq\theta\leq\pi</m>. Then
            </p>
            <me>\norm{\mathbf{a}\times\mathbf{b}} = \norm{\mathbf{a}}\norm{\mathbf{b}}\sin\theta.</me>
          </statement>
        </theorem>
        <p>
          So in particular, two nonzero vectors <m>\mathbf{x}</m> and <m>\mathbf{y}</m> are parallel (i.e. have <m>\theta=0</m>) if and only if <m>\mathbf{a}\times\mathbf{b} = \mathbf{0}</m>.
        </p>

        <example xml:id="example-testing-collinearity">
          <title>Testing collinearity</title>
          <p>
            We say that three points <m>P,Q</m> and <m>R</m> are <term>collinear</term> if they all lie on the same line. Suppose we want to check if the points <m>P(-2,0,1), Q(-1,2,4)</m> and <m>R(1,6,10)</m> are collinear or not. How can we do so? If we start by defining
          </p>
          <me>\mathbf{u} = \vec{PQ} = \dotprod{1,2,3}\quad\text{and}\quad \mathbf{v} = \vec{QR} = \dotprod{2,4,6},</me>
          <p>
            then we can say that all three points lie on the same line if and only if <m>\mathbf{u}</m> and <m>\mathbf{v}</m> are parallel to each other. So we'll compute their cross product to get <m>\mathbf{u}\times\mathbf{v} = \mathbf{0}</m>. Since these vectors are parallel, then the three given points must lie on the same line.
          </p>
        </example>

        <p>
          Another important property of the magnitude of the cross product is the following: <m>\norm{\mathbf{a}\times\mathbf{b}}</m> is exactly equal to the area of the parallelogram determined by <m>\mathbf{a}</m> and <m>\mathbf{b}</m>.
        </p>

        <example xml:id="example-areas-of-triangles">
          <title>Area of a triangle</title>
          <p>
            Suppose that we want the area of the triangle with vertices <m>P(1,2,-1), Q(2,0,0)</m> and <m>R(1,-1,-2)</m>. To start, we need to find vectors that determine the triangle. We can use
          </p>
          <me>\mathbf{u} = \vec{PQ} = \dotprod{1,-2,1}\quad\text{and}\quad\mathbf{v} = \vec{PR} = \dotprod{0,-3,-1}.</me>
          <p>
            Now, the triangle determined by <m>\mathbf{u}</m> and <m>\mathbf{v}</m> is precisely half of the parallelogram determined by these same vectors, so the area of this triangle is equal to <m>\frac{1}{2}\norm{\mathbf{u}\times\mathbf{v}}</m>. We can use Sage as in the cell below to find the cross product of these vectors. Doing so, we get <m>\mathbf{u}\times\mathbf{v} = \dotprod{5,1,-3}.</m> So the area of the triangle with vertices <m>P,Q</m> and <m>R</m> is
          </p>
          <md>
            <mrow>\operatorname{area} \triangle PQR &amp; = \frac{1}{2}\norm{\mathbf{u}\times\mathbf{v}} </mrow>
            <mrow> &amp; = \frac{1}{2}\norm{\dotprod{5,1,-3}} </mrow>
            <mrow> &amp; = \frac{1}{2}\sqrt{35}. </mrow>
          </md>
        </example>
        <sage>
          <input>
            u = vector([1,-2,1])
            v = vector([0,-3,-1])
            u.cross_product(v)
          </input>
          <output>
            (5, 1, -3)
          </output>
        </sage>
        <theorem xml:id="theorem-properties-of-the-cross-product">
          <title>Properties of the Cross Product</title>
          <idx><h>cross product</h><h>properties</h></idx>
          <statement>
            <p>
              Let <m>\mathbf{a},\mathbf{b},\mathbf{c}</m> be vectors and <m>c</m> a scalar. Then the following properties are true:
            </p>
            <ol cols="2">
              <li><m>\mathbf{a}\times\mathbf{b} = -\mathbf{b}\times\mathbf{a}</m></li>
              <li><m>(c\mathbf{a})\times\mathbf{b} = c(\mathbf{a}\times\mathbf{b}) = \mathbf{a}\times(c\mathbf{b})</m></li>
              <li><m>\mathbf{a}\times(\mathbf{b}+\mathbf{c}) = \mathbf{a}\times\mathbf{b}+\mathbf{a}\times\mathbf{c}</m></li>
              <li><m>(\mathbf{a}+\mathbf{b})\times\mathbf{c} = \mathbf{a}\times\mathbf{c}+\mathbf{b}\times\mathbf{c}</m></li>
              <li><m>\mathbf{a}\cdot(\mathbf{b}\times\mathbf{c}) = (\mathbf{a}\times\mathbf{b})\cdot\mathbf{c}</m></li>
            </ol>
          </statement>
        </theorem>
        <p>
          The last item above is an important relationship between the cross product and dot product called the <term>scalar triple product</term>. There is an important geometric significance to this new product.
        </p>
        <theorem xml:id="theorem-geometry-of-the-scalar-triple-product">
          <idx>scalar triple product</idx>
          <title>Geometry of the Scalar Triple Product</title>
          <statement>
            <p>
              Let <m>\mathbf{a},\mathbf{b}</m> and <m>\mathbf{c}</m> be vectors in <m>\RR^{3}</m>. Then <m>|\mathbf{a}\cdot(\mathbf{b}\times\mathbf{c})|</m> is equal to the volume of the parallelepiped determined by <m>\mathbf{a},\mathbf{b}</m> and <m>\mathbf{c}</m>.
            </p>
          </statement>
        </theorem>
        <example xml:id="example-testing-if-vectors-are-coplanar">
          <title>Testing if vectors are coplanar</title>
          <p>
            We say that three vectors <m>\mathbf{u},\mathbf{v}</m> and <m>\mathbf{w}</m> are <term>coplanar</term> if they can all lie in a single plane. For example, <m>\mathbf{i},\mathbf{k}</m> and <m>\dotprod{-4,0,56}</m> are coplanar since they lie in the <m>xz</m>-plane, but <m>\mathbf{i},\mathbf{j}</m> and <m>\mathbf{k}</m> are not coplanar. Suppose we're given <m>\mathbf{u} = \dotprod{-3,2,1},\mathbf{v} = \dotprod{1,2,0}</m> and <m>\mathbf{w} = \dotprod{1,1,1}</m>. These vectors are coplanar if and only if the parallelepiped determined by these vectors has zero volume (i.e. is flat). Since
          </p>
          <me>\mathbf{u}\cdot(\mathbf{v}\times\mathbf{w}) = -9,</me>
          <p>
            these vectors are <em>not</em> coplanar.
          </p>
        </example>

        <example xml:id="example-another-way-to-compute-cross-products">
          <title>Another way to compute cross products</title>
          <p>
            Using <xref ref="theorem-properties-of-the-cross-product" text="type-global" /> and the facts that
          </p>
          <md>
            <mrow>\mathbf{i}\times\mathbf{j} &amp; = \mathbf{k} </mrow>
            <mrow>\mathbf{j}\times\mathbf{k} &amp; = \mathbf{i} </mrow>
            <mrow>\mathbf{k}\times\mathbf{i} &amp; = \mathbf{j} </mrow>
            <mrow>\mathbf{a}\times\mathbf{a} &amp; = \mathbf{0} </mrow>
          </md>
          <p>
            gives us another way to compute cross products that doesn't involve determinants. As an example, let <m>\mathbf{u} = \dotprod{1,4,-3}</m> and <m>\mathbf{v} = \dotprod{0,2,1}.</m> Then
          </p>
          <md>
            <mrow>\mathbf{u}\times\mathbf{v} &amp; = (\mathbf{i}+4\mathbf{j}-3\mathbf{k})\times(2\mathbf{j}+\mathbf{k}) </mrow>
            <mrow> &amp; = 2\mathbf{i}\times\mathbf{j} + \mathbf{i}\times\mathbf{k} +8\mathbf{j}\times\mathbf{j} + 4\mathbf{j}\times\mathbf{k} - 6\mathbf{k}\times\mathbf{j} -3\mathbf{k}\times\mathbf{k} </mrow>
            <mrow> &amp; = 2\mathbf{k}-\mathbf{j}+4\mathbf{i}-6\mathbf{i} </mrow>
            <mrow> &amp; = \dotprod{-2,-1,2}. </mrow>
          </md>
        </example>
      </subsection>
      <subsection xml:id="subsection-torque">
        <title>Torque</title>
        <p>
          Consider a force <m>\mathbf{F}</m> acting on a rigid body at some position <m>\mathbf{r}</m>. This force applies a turning affect to the body, that we measure by <term>torque</term>.
        </p>
        <definition xml:id="definition-torque">
          <title>Torque</title>
          <idx>torque</idx>
          <statement>
            <p>
              The torque <m>\boldsymbol{\tau}</m> of a force <m>\mathbf{F}</m> acting at a position <m>\mathbf{r}</m> is defined to be the vector
            </p>
            <me>\boldsymbol{\tau} = \mathbf{r}\times\mathbf{F}.</me>
          </statement>
        </definition>
        <p>
          As one example of torque, consider a wrench applied to a bolt. The force is exerted at the end of the wrench, and the torque is a vector that's parallel to the axis of rotation of the bolt. The torque is greater if the force is applied at a direction perpendicular (or nearly so) to that of the wrench, and smaller if the force is nearly parallel to the direction of the wrench. As a quick check, the torque is <m>\mathbf{0}</m> if the force is exactly parallel to the direction of the wrench, which makes sense: if we're pushing or pulling the wrench, the bolt won't rotate at all.
        </p>

        <example xml:id="example-torque-and-hex-keys">
          <title>Torque and hex keys</title>
          <p>
            A hex key (Allen wrench) with a short arm of length <quantity><mag>27</mag><unit base="meter" prefix="milli"/></quantity> and a long arm length of <quantity><mag>154</mag><unit base="meter" prefix="milli"/></quantity> is applied to a bolt, with the short arm attached to the bolt. To turn the bolt, a force of <quantity><mag>0.5</mag><unit base="newton"/></quantity> is applied to the long arm of the hex key turning the bolt counterclockwise when viewed from the positive <m>x</m>-axis, and is exactly perpendicular to both the short arm and long arm of the hex key. We want to find the torque of this force on the bolt.
          </p>
          <p>
            One way we can do this is to imagine the bolt sitting at the origin, and the hex key is (initially) in the <m>xy</m>-plane. Note that once the force is applied, it will begin to rotate the hex key out of the <m>xy</m>-plane. Now, the torque is defined by
            <me>\boldsymbol{\tau} = \mathbf{r}\times\mathbf{F}</me>
            where <m>\mathbf{r}</m> is the vector from the <em>axis of rotation</em> of the bolt to the point where the force <m>\mathbf{F}</m> is applied.
          </p>
          <aside>
            <p>
              If we were using a standard wrench, then we could simply let <m>\mathbf{r}</m> be the position vector with initial point at the bolt and terminal point at where the force is applied.
            </p>
          </aside>
          <p>
            We can find <m>\mathbf{r}</m> without too much trouble: it's <m>\mathbf{r} = \dotprod{0,.154,0}</m>. To find the force <m>\mathbf{F}</m>, note that it's perpendicular to both the long arm and short arm of the bolt. So <m>\mathbf{F} = \dotprod{0,0,.5}</m> in order to guarantee counterclockwise rotation of the bolt when viewed from the positive <m>x</m>-axis. So the torque is given by
          </p>
          <md>
            <mrow>\boldsymbol{\tau} \amp= \mathbf{r}\times\mathbf{F} </mrow>
            <mrow> \amp = \dotprod{0,.154,0}\times\dotprod{0,0,.5} </mrow>
            <mrow> \amp = \dotprod{.077, 0, 0}. </mrow>
          </md>
        </example>
      </subsection>
    </section>
    <section xml:id="section-equations-of-lines-and-planes">
      <title>Equations of Lines and Planes</title>
      <introduction>
        <p>
          Recall that the equation of a line in <m>\RR^{2}</m> has the general form <m>ax+by + c = 0</m>.
          However, this equation does not give a line in <m>\RR^{3}</m>.
          In fact, it actually gives a plane, as we'll see! What we want to do now is find exactly how to describe a given line or plane.
        </p>
      </introduction>
      <subsection xml:id="subsection-equations-of-lines">
        <title>Equations of Lines</title>
        <p>
          First, suppose we have a line <m>L</m> in <m>\RR^{3}</m> as follows:
        </p>
        <figure xml:id="figure-line-in-space">
          <image xml:id="image-line-in-space" width="90%">
            <latex-image><![CDATA[
              \begin{tikzpicture} [axis/.style={->,blue,thick}, 
              vector/.style={-stealth,red,very thick}, 
              vector guide/.style={dashed,red,thick}]
              \begin{axis}[
              view={120}{30},
              axis lines=center,
              width=15cm,height=15cm,
              xtick=\empty,ytick=\empty,ztick=\empty,
              % minor tick={-12,-11,...,12},
              xmin=-10,xmax=10,ymin=-5,ymax=5,zmin=-5,zmax=5,
              xlabel={$x$},ylabel={$y$},zlabel={$z$},
              grid=major
              ]

              %standard tikz coordinate definition using x, y, z coords
              \coordinate (O) at (0,0,0);
              \coordinate (a) at (5,2,2);
              \coordinate (b) at (3,1,-1);

              % Label origin and points on line
              \draw (O) node[above left]{$O$};
              \node at (a) {\textbullet};
              \node at (b) {\textbullet};
              \draw (a) node[above left]{$A$};
              \draw (b) node[left]{$B$};

              % Draw a,b
              \draw[thick, blue] (7,3,5)--(1,0,-4) node[pos=1.1]{$L$};
              \end{axis}
              \end{tikzpicture}
              ]]>
            </latex-image>
          </image>
          <caption>A line in <m>\mathbb{R}^{3}</m>.</caption>
        </figure>
        <p>
          Our goal is to find an equation that describes this line. Imagine that we have a vector <m>\mathbf{r}_{0}</m> pointing from the origin to the point <m>A</m>, like so:
        </p>
        <figure xml:id="figure-line-in-space-1">
          <image xml:id="image-line-in-space-1" width="90%">
            <latex-image><![CDATA[
              \begin{tikzpicture} [axis/.style={->,blue,thick}, 
              vector/.style={-stealth,red,very thick}, 
              vector guide/.style={dashed,red,thick}]
              \begin{axis}[
              view={120}{30},
              axis lines=center,
              width=15cm,height=15cm,
              xtick=\empty,ytick=\empty,ztick=\empty,
              % minor tick={-12,-11,...,12},
              xmin=-10,xmax=10,ymin=-5,ymax=5,zmin=-5,zmax=5,
              xlabel={$x$},ylabel={$y$},zlabel={$z$},
              grid=major
              ]

              %standard tikz coordinate definition using x, y, z coords
              \coordinate (O) at (0,0,0);
              \coordinate (a) at (5,2,2);
              \coordinate (b) at (3,1,-1);

              % Label origin and points on line
              \draw (O) node[above left]{$O$};
              \node at (a) {\textbullet};
              \node at (b) {\textbullet};
              \draw (a) node[above left]{$A$};
              \draw (b) node[left]{$B$};

              % Draw a,b
              \draw[thick, blue] (7,3,5)--(1,0,-4) node[pos=1.1]{$L$};

              % Draw initial vector
              \draw[vector] (O)--(a) node[pos=1.7]{$\mathbf{r}_{0}$};
              \end{axis}
              \end{tikzpicture}
              ]]>
            </latex-image>
          </image>
          <caption>Tracing out <m>L</m> using vectors.</caption>
        </figure>
        <p>
          Then we can get to every other point on the line by starting from <m>\mathbf{r}_{0}</m>. In particular, if <m>\mathbf{u}</m> is any vector parallel to <m>\vec{AB}</m>, then <m>\mathbf{r} = \mathbf{r}_{0}+\mathbf{u}</m> must also be on the line <m>L</m>:
        </p>
        <figure xml:id="figure-line-in-space-2">
          <image xml:id="image-line-in-space-2" width="90%">
            <latex-image><![CDATA[
              \begin{tikzpicture} [axis/.style={->,blue,thick}, 
              vector/.style={-stealth,red,very thick}, 
              vector guide/.style={dashed,red,thick}]
              \begin{axis}[
              view={120}{30},
              axis lines=center,
              width=15cm,height=15cm,
              xtick=\empty,ytick=\empty,ztick=\empty,
              % minor tick={-12,-11,...,12},
              xmin=-10,xmax=10,ymin=-5,ymax=5,zmin=-5,zmax=5,
              xlabel={$x$},ylabel={$y$},zlabel={$z$},
              grid=major
              ]

              %standard tikz coordinate definition using x, y, z coords
              \coordinate (O) at (0,0,0);
              \coordinate (a) at (5,2,2);
              \coordinate (b) at (3,1,-1);

              % Label origin and points on line
              \draw (O) node[above left]{$O$};
              \node at (a) {\textbullet};
              \node at (b) {\textbullet};
              \draw (a) node[above left]{$A$};
              \draw (b) node[left]{$B$};

              % Draw a,b
              \draw[thick, blue] (7,3,5)--(1,0,-4) node[pos=1.1]{$L$};

              % Draw initial vector, direction vector, vector on line
              \draw[vector] (O)--(a) node[pos=1.7]{$\mathbf{r}_{0}$};
              \draw[vector guide] (a)--(4,1.5,.5) node[midway, right]{$\mathbf{u}$};
              \draw[vector] (O)--(4,1.5,.5) node[pos=1.2]{$\mathbf{r} = \mathbf{r}_{0}+\mathbf{u}$};
              \end{axis}
              \end{tikzpicture}
              ]]>
            </latex-image>
          </image>
          <caption>Tracing out <m>L</m> using vectors.</caption>
        </figure>
        <p>
          So to get all possible points on <m>L</m>, we just need to look at all possible vectors <m>\mathbf{r} = \mathbf{r}_{0}+\mathbf{u}</m>, where <m>\mathbf{u}</m> is any vector parallel to <m>\vec{AB}</m>. If we set <m>\mathbf{v} = \vec{AB}</m>,<fn>We don't actually have to pick <m>\mathbf{v} = \vec{AB}</m>, we just need <m>\mathbf{v}</m> to be parallel to <m>\vec{AB}</m>.</fn> then
        </p>
        <me>\mathbf{r} = \mathbf{r}_{0}+t\mathbf{v}</me>
        <p>
          will trace out all points on <m>L</m> as <m>t</m> varies from <m>-\infty</m> to <m>\infty</m>.
        </p>
        <theorem xml:id="theorem-parametric-equations-of-a-line">
          <title>Parametric Equations of a Line</title>
          <idx><h>lines</h><h>parametric equations in <m>\RR^{3}</m></h></idx>
          <statement>
            <p>
              If <m>P_{0}(x_{0},y_{0},z_{0})</m> is a point on a line <m>L</m>, and if <m>\mathbf{v} = \dotprod{a,b,c}</m> is parallel to <m>L</m>, then
            </p>
            <me>\mathbf{r} = \mathbf{r}_{0}+t\mathbf{v}</me>
            <p>
              traces out <m>L</m>, where 
            </p>
            <me>\mathbf{r} = \dotprod{x,y,z},\quad\mathbf{r}_{0} = \dotprod{x_{0},y_{0},z_{0}}.</me>
            <p>
              We can also write this as the system of equations
            </p>
            <me>x = x_{0}+ta,\quad y=y_{0}+tb\quad\text{and}\quad z = z_{0}+tc.</me>
          </statement>
        </theorem>
        <example xml:id="example-equation-of-a-line-with-a-given-direction-and-point">
          <title>Equation of a line with a given direction and point</title>
          <p>
            Suppose we want to find the equation of a line <m>L</m> that passes through <m>(2,5,-3)</m> and is perpendicular to <m>\mathbf{u} = \dotprod{2,1,2}</m>. <xref ref="theorem-parametric-equations-of-a-line" text="type-global" /> says that we only need to find the right choices for <m>\mathbf{r}_{0}</m> and <m>\mathbf{v}</m> in order to get the equation of such a line, and we can write down one of these right away:
          </p>
          <me>\mathbf{r}_{0} = \dotprod{2,5,-3}.</me>
          <p>
            So we just need to find <m>\mathbf{v}</m>. Since <m>L</m> is orthogonal to <m>\mathbf{u} = \dotprod{2,1,2}</m>, this means we want <m>\mathbf{v}</m> to be orthogonal to <m>\mathbf{u}</m> as well. A great way to find such a <m>\mathbf{v}</m> is to use the cross product. If <m>\mathbf{w}</m> is any nonzero vector, then <m>\mathbf{u}\times\mathbf{w}</m> must be orthogonal to both <m>\mathbf{u}</m> and <m>\mathbf{w}</m>, and in particular it must be orthogonal to <m>\mathbf{u}</m>. So we can take
          </p>
          <me>\mathbf{v} = \dotprod{2,1,2}\times\mathbf{i} = \dotprod{0,2,-1}.</me>
          <p>
            So the equation of this line is
          </p>
          <me>\mathbf{r} = \dotprod{2,1+2t,2-t}</me>
          <p>
            As <m>t</m> varies, this will trace out our line.
          </p>
        </example>
        <p>
          When we begin working with line integrals, we'll need to know how to parameterize a line segment, so we'll discuss that now. Suppose we have a line segment between two points <m>P_{0}</m> and <m>P_{1}</m>. Let <m>\mathbf{r}_{0}</m> and <m>\mathbf{r}_{1}</m> denote the corresponding position vectors of these points (i.e. the vectors whose components are given by the coordinates of these points). Then the equation of the <em>line</em> between <m>P_{0}</m> and <m>P_{1}</m> is given by
        </p>
        <me>\mathbf{r}] = \mathbf{r}_{0}+t(\mathbf{r}_{1}-\mathbf{r}_{0}) = (1-t)\mathbf{r}_{0}+t\mathbf{r}_{1}.</me>
        <p>
          To get the line segment we're actually looking for, we just need to restrict <m>t</m> to the interval <m>0\leq t\leq 1</m>. So we can say that 
        </p>
        <me>\mathbf{r} = (1-t)\mathbf{r}_{0}+t\mathbf{r}_{1} \quad\text{with}\quad0\leq t\leq 1</me>
        <p>
          traces out the line segment between <m>P_{0}</m> and <m>P_{1}</m>.
        </p>
      </subsection>
      <subsection xml:id="subsection-equations-of-planes">
        <title>Equations of Planes</title>
        <p>
          Now we move on to finding the equation of a plane. We'll try a vector approach to this like we did for lines, and this won't be too bad to do. We just need to keep the following in mind:
        </p>
        <observation xml:id="observation-vectors-and-planes">
          <p>
            A plane in <m>\RR^{3}</m> is uniquely determined by specifying a single point for it to pass through and a direction for it to face.
          </p>
        </observation>
        <p>
          So in particular, vectors will provide a nice way to specify the direction of a plane, and any vector that does so must be orthogonal to the plane. If a (nonzero) vector <m>\mathbf{n}</m> is orthogonal to a given plane, then we call <m>\mathbf{n}</m> a <term>normal vector</term> to the plane. Now we can build up an equation of a given plane.
        </p>
        <p>
          Let <m>P_{0}(x_{0},y_{0},z_{0})</m> denote a point on the plane, and let <m>\mathbf{n} = \dotprod{a,b,c}</m> be a normal vector to the plane. If <m>\mathbf{r}=\dotprod{x,y,z}</m> is the position vector of any other point on the plane, then it must be true that <m>\mathbf{n}\cdot(\mathbf{r}-\mathbf{r}_{0}) = 0</m>, where <m>\mathbf{r}_{0}</m> is the position vector of <m>P_{0}</m>. We can summarize this in the following theorem.
        </p>
        <theorem xml:id="theorem-vector-and-scalar-equations-of-a-plane">
          <title>Vector and Scalar Equations of a Plane</title>
          <idx><h>planes</h><h>vector and scalar equations</h></idx>
          <statement>
            <p>
              If <m>\mathbf{r}_{0} = \dotprod{x_{0},y_{0},z_{0}}</m> is the position vector for some point on a plane with normal vector <m>\mathbf{n} = \dotprod{a,b,c}</m>, then the position vector <m>\mathbf{r} = \dotprod{x,y,z}</m> of any other point on the plane must satisfy the <term>vector equation of the plane</term>:
            </p>
            <me>\mathbf{n}\cdot(\mathbf{r}-\mathbf{r}_{0}) = 0.</me>
            <p>
              Equivalently, any point <m>(x,y,z)</m> must also satisfy the equivalent <term>scalar equation of the plane</term>:
            </p>
            <me>a(x-x_{0})+b(y-y_{0})+c(z-z_{0}) = 0.</me>
          </statement>
        </theorem>
        <example xml:id="example-equation-of-a-plane-ortho">
          <title>Equation of a plane orthogonal to a line</title>
          <p>
            Consider the two lines in <m>\RR^{3}</m> determined by the equations
          </p>
          <md>
            <mrow>\mathbf{r}_{1} &amp; = \dotprod{1,1,0} + t\dotprod{1,-1,2} </mrow>
            <mrow>\mathbf{r}_{2} &amp; = \dotprod{2,0,2} + s\dotprod{-1,1,0} </mrow>
          </md>
          <p>
            We want to find the equation of the plane that contains the intersection of these two lines and is orthogonal to the first line. By <xref ref="theorem-vector-and-scalar-equations-of-a-plane" text="type-global" />, we need a point on the plane and a normal vector. Since the plane must contain the intersection of these two lines, that's our point. To find it, we'll set <m>\mathbf{r}_{1} = \mathbf{r}_{2}</m> and go from there:
          </p>
          <md>
            <mrow>\mathbf{r}_{1}=\mathbf{r}_{2} &amp; \Rightarrow \dotprod{-1,1,-2} + \dotprod{t+s,s-t,2t} = \mathbf{0} </mrow>
            <mrow> &amp; \Rightarrow t+s-1 = s-t+1 = 2t-2 = 0 </mrow>
            <mrow> &amp; \Rightarrow t = 1\quad\text{and}\quad s=0 </mrow>
          </md>
          <p>
            So the position vector <m>\mathbf{r}_{0}</m> of the point where these lines intersect is given by <m>\mathbf{r}_{0} = \dotprod{2,0,2}</m>. We also need a normal vector to the plane, but this is easy to find: since the plane needs to be orthogonal to the first line, we can just take <m>\mathbf{n} = \dotprod{1,-1,2}</m>. So the equation of our plane is
          </p>
          <me>\dotprod{1,-1,2}\cdot\dotprod{x-2,y,z-2} = 0</me>
          <p>
            or equivalently
          </p>
          <me>x-y+2z -6 = 0.</me>
          <p>
            This plane is plotted below using the Sage cell immediately after this example.
          </p>
        </example>
        <sage>
          <input>
            from sage.manifolds.utilities import set_axes_labels
            var('x y')
            P = plot3d((y-x)/2+3, (x,-3,3), (y,-3,3))
            set_axes_labels(P,'x','y','z')
          </input>
        </sage>
        <p>
          We can rewrite the equation of a plane in the form
        </p>
        <me>ax+by+cz+d = 0.</me>
        <p>
          A normal vector to this plane is given by <m>\mathbf{n} = \dotprod{a,b,c}</m>.
        </p>
        <example xml:id="example-equation-of-a-line-orthogonal-to-a-plane">
          <title>Equation of a line orthogonal to a plane</title>
          <p>
            Suppose we're given the plane <m>3x-5z+2 = 0</m>, and we want to find the equation of the line orthogonal to this plane and passing through the point <m>(3,-1,2)</m>. Then the equation of this line is
          </p>
          <me>\mathbf{r} = \mathbf{r}_{0}+t\mathbf{v}</me>
          <p>
            where <m>\mathbf{r}_{0} = \dotprod{3,-1,2}</m> and <m>\mathbf{v}</m> is a vector parallel to the line. Since the line must be orthogonal to the plane, we can take <m>\mathbf{v} = \dotprod{3,0,-5}</m>. So the equation of this line is
          </p>
          <me>\mathbf{r} = \dotprod{3,-1,2}+\dotprod{3t,0,-5t}.</me>
        </example>
        <example xml:id="example-equation-of-a-line-of-intersection-between-two-planes">
          <title>Equation of a plane containing a line and a point</title>
          <p>
            Suppose we're trying to find a plane containing the point <m>(1,2,0)</m> and containing the line <m>\mathbf{r} = \dotprod{3-t,2,5+2t}</m>. To get the equation of this plane, we also need a normal vector to the plane. We can find the normal vector by computing the cross product of two vectors parallel to the plane.
          </p>
          <p>
            First, since the plane contains the line <m>\dotprod{3-t,2,5+2t},</m> the direction of this line must be parallel to the plane. So we know that <m>\mathbf{v} = \dotprod{-1,0,2}</m> is parallel to the plane. To get another vector parallel to this plane, we can use the given point and a second point in the plane, say <m>(3,2,5)</m>, which comes from the line (just set <m>t=0</m>). So the vector <m>\mathbf{u} = \dotprod{3-1,2-2,5-0} = \dotprod{2,0,5}</m> must also be parallel to the plane. Hence a normal vector to this plane is
          </p>
          <me>\mathbf{n} = \mathbf{u}\times\mathbf{v} = \dotprod{0,9,0}.</me>
          <p>
            So an equation of this plane is given by
          </p>
          <me>9(y-2) = 0.</me>
        </example>
      </subsection>
    </section>
    <section xml:id="section-cylinders-and-quadric-surfaces">
      <title>Cylinders and Quadric Surfaces</title>
      <introduction>
        <p>
          Before we move on to doing calculus with vectors, we'll briefly take a look at more graphs in <m>\RR^{3}</m>.
          In particular, we'll look at <term>cylinders</term> and <term>quadric surfaces</term>.
        </p>
      </introduction>
      <subsection xml:id="subsection-cylinders">
        <title>Cylinders</title>
        <definition xml:id="definition-cylinders">
          <idx><h>cylinders</h><h>definition</h></idx>
          <title>Cylinders</title>
          <statement>
            <p>
              A cylinder is the collection of all lines parallel to a given line and passing through some plane curve.
            </p>
          </statement>
        </definition>
        <p>
          A basic example of a cylinder is the set of all lines passing through the unit circle in the <m>xy</m>-plane and parallel to the <m>z</m>-axis.
          In <m>\RR^{3}</m>, this is just the graph of <m>x^{2}+y^{2}=1</m>.
          The graph of this cylinder is provided below.
        </p>
        <figure>
          <caption>The cylinder <m>x^2+y^2=1</m></caption>
          <interactive xml:id="calcplot3d-cylinder-x2y2-equals-1" calcplot3d="type=implicit;equation=x^2+y^2~1;cubes=16;visible=true;fixdomain=false;xmin=-2;xmax=2;ymin=-2;ymax=2;zmin=-2;zmax=2;alpha=-1;hidemyedges=false;view=0;format=normal;constcol=rgb(255,0,0)&amp;type=window;hsrmode=3;nomidpts=true;anaglyph=-1;center=9.491774348814847,-1.0743593725390694,2.958373142423513,1;focus=0,0,0,1;up=-0.18518534621200514,0.08647408895754666,0.9788915259043272,1;transparent=false;alpha=140;twoviews=false;unlinkviews=false;axisextension=0.7;xaxislabel=x;yaxislabel=y;zaxislabel=z;edgeson=true;faceson=true;showbox=true;showaxes=true;showticks=true;perspective=true;centerxpercent=0.5;centerypercent=0.5;rotationsteps=30;autospin=true;xygrid=false;yzgrid=false;xzgrid=false;gridsonbox=true;gridplanes=false;gridcolor=rgb(128,128,128);xmin=-2;xmax=2;ymin=-2;ymax=2;zmin=-2;zmax=2;xscale=1;yscale=1;zscale=1;zcmin=-4;zcmax=4;xscalefactor=1;yscalefactor=1;zscalefactor=1;tracemode=0;keep2d=false;zoom=0.885333" variant="minimal"/>
        </figure>
        <p>
          For our purposes, equations that give a cylinder will often be missing a variable.
        </p>
        <example xml:id="example-a-sinusoidal-cylinder">
          <title>A sinusoidal cylinder</title>
          <p>
            Consider the equation <m>z = \sin y</m> in <m>\RR^{3}</m>.
            This equation is missing the variable <m>x</m>, which suggests that the graph of this equation should be a cylinder.
            However, it's not going to look like the cylinders we may be used to at this point.
            In fact, this is just the set of all lines passing through the curve <m>z=\sin y</m> in the <m>yz</m>-plane and parallel to the <m>x</m>-axis. It's graph is given below.
          </p>
        </example>
        <!-- <sage>
          <input>
            # Code shamelessly adapted from this stackoverflow post: http://stackoverflow.com/questions/26989131/add-cylinder-to-plot
            import matplotlib.pyplot as plt
            import numpy as np
            from mpl_toolkits.mplot3d import Axes3D

            plt.rc('text', usetex=True)

            fig = plt.figure()
            ax = fig.add_subplot(111, projection='3d')

            # Cylinder
            x=np.linspace(-1, 1, 100)
            y=np.linspace(-2, 2, 100)
            Xc, Yc=np.meshgrid(x, y)
            Zc = np.sin(Yc)

            # Draw parameters
            rstride = 20
            cstride = 10
            ax.plot_surface(Xc, Yc, Zc, alpha=0.2, rstride=rstride, cstride=cstride)

            ax.set_xlabel(r'$x$')
            ax.set_ylabel(r'$y$')
            ax.set_zlabel(r'$z$')
            plt.show()
          </input>
        </sage> -->
        <figure>
          <caption>The cylinder <m>z=\sin(y)</m></caption>
          <interactive xml:id="calcplot3d-cylinder-z-equal-sin-y" calcplot3d="type=z;z=sin(y);visible=true;umin=-2;umax=2;vmin=-2;vmax=2;grid=30;format=normal;alpha=-1;hidemyedges=false;constcol=rgb(255,0,0);view=0;contourcolor=red;fixdomain=false;contourplot=true;showcontourplot=false;firstvalue=-1;stepsize=0.2;numlevels=11;list=;uselist=false;xnum=46;ynum=46;show2d=false;hidesurface=false;hidelabels=true;showprojections=false;surfacecontours=true;projectioncolor=rgba(255,0,0,1);showxygrid=false;showxygridonbox=false;showconstraint=false&amp;type=window;hsrmode=3;nomidpts=true;anaglyph=-1;center=9.164617280977104,-3.809430743152034,-1.2239393393213218,1;focus=0,0,0,1;up=0.10019581584936116,-0.07765187981348196,0.9919329534034613,1;transparent=false;alpha=140;twoviews=false;unlinkviews=false;axisextension=0.7;xaxislabel=x;yaxislabel=y;zaxislabel=z;edgeson=true;faceson=true;showbox=true;showaxes=true;showticks=true;perspective=true;centerxpercent=0.5;centerypercent=0.5;rotationsteps=30;autospin=true;xygrid=false;yzgrid=false;xzgrid=false;gridsonbox=true;gridplanes=false;gridcolor=rgb(128,128,128);xmin=-2;xmax=2;ymin=-2;ymax=2;zmin=-2;zmax=2;xscale=1;yscale=1;zscale=1;zcmin=-4;zcmax=4;xscalefactor=1;yscalefactor=1;zscalefactor=1;tracemode=0;keep2d=false;zoom=0.885333" variant="minimal"/>
        </figure>
        <example xml:id="example-another-cylinder">
          <title>Another cylinder</title>
          <p>
            Consider the cylinder given by the set of all lines passing through the plane curve <m>y = 3x-1</m> in the <m>xy</m>-plane and parallel to the line in <m>\RR^{3}</m> defined by the equation
          </p>
          <me>\mathbf{r} = \dotprod{3-t,t,3}.</me>
          <p>
            What does this cylinder look like? Well, we can view it as essentially a "sheet" of lines cutting through the <m>xy</m>-plane at the line <m>y = 3x-1</m>.
            If we try to imagine this, then this suggests that this cylinder should probably be a plane!
            In fact, this cylinder is exactly the plane containing the point <m>(0,-1,0)</m> and parallel to the line <m>\mathbf{r}</m> given above.
            As the line itself is parallel to the <m>xy</m>-plane, the resulting cylinder is just the <m>xy</m>-plane.
          </p>
        </example>
      </subsection>
      <subsection xml:id="subsection-quadric-surfaces">
        <title>Quadric Surfaces</title>
        <p>
          A <term>quadric surface</term> is any surface that is the graph of an equation of the form
        </p>
        <me>Ax^{2}+By^{2}+Cz^{2}+Dxy+Exz+Fyz+Gx+Hy+Iz+0 = 0.</me>
        <p>
          A useful tool for graphing quadric surfaces (and others in <m>\RR^{3}</m>) is the concept of a <term>trace</term>, which is what the curve looks like in a plane parallel to the one the coordinate planes. This amounts to setting either, <m>x,y</m> or <m>z</m> equal to a constant and graphing the resulting equation.
        </p>
        <example xml:id="example-an-ellipsoid">
          <title>An ellipsoid</title>
          <p>
            Consider the equation
          </p>
          <me>4x^{2}+\frac{y^{2}}{9}+\frac{z^{2}}{25} = 1.</me>
          <p>
            If we want to graph this, we can graph a few of it's traces to get an idea of what it looks like. Let's graph traces parallel the <m>xz</m>-plane to start. This means we'll set <m>y</m> equal to different constants. For <m>y=0</m>, we get the equation
          </p>
          <me>4x^{2}+\frac{z^{2}}{25} = 1</me>
          <p>
            which we rewrite as
          </p>
          <me>\frac{x^{2}}{(\frac{1}{2})^{2}}+\frac{z^{2}}{25} = 1.</me>
          <p>
            This is an ellipse in the <m>xz</m>-plane, with minor axis <m>\frac{1}{2}</m> and major axis <m>5</m>. We can graph another trace, say in the <m>xy</m>-plane, we get
          </p>
          <me>\frac{x^{2}}{(\frac{1}{2})^{2}}+\frac{y^{2}}{9} = 1,</me>
          <p>
            which is an ellipse with minor axis <m>\frac{1}{2}</m> and major axis <m>3</m>.
            Similarly, in the <m>yz</m>-plane we have an ellipse with minor axis <m>3</m> and major axis <m>5</m>.
            Putting these together gives us a rough idea of the shape of this surface, which we call an <term>ellipsoid</term>.
          </p>
        </example>
        <example xml:id="example-region-between-surfaces">
          <title>Region between surfaces</title>
          <p>
            Suppose we want to sketch the region between the surface <m>z=\sqrt{x^{2}+y^{2}}</m> and the cylinder <m>x^{2}+y^{2}=1</m> for <m>0\leq z\leq 1</m>.
            First, we can graph <m>z=\sqrt{x^{2}+y^{2}}</m>.
            If we look at the horizontal traces of this surface, we get circles of varying radii.
            As <m>z</m> increases, the radii of these circles increase as well.
            This surface is just a cone!
            So we're describing the region of this cone bounded between <m>z=0</m> and <m>z=1</m>, and contained inside the cylinder <m>x^{2}+y^{2}=1</m>.
          </p>
        </example>
        <figure>
          <caption>The region contained between <m>z = \sqrt{x^2+y^2}</m> and <m>x^2+y^2=1</m></caption>
          <interactive xml:id="calcplot3d-region-between-cylinder-and-cone" calcplot3d="type=region;region=x;visible=true;alpha=-1;hidemyedges=false;view=0;top2d=sqrt(1-x^2);bot2d=-sqrt(1-x^2);umin=-1;umax=1;top3d=sqrt(x^2+y^2);bot3d=0;grid=25,25;showriemann=false;xnum=4;ynum=4;partition=Inner;heightpt=0;showpts=false;mode=rect;polarform=t;polartop=2;polarbottom=0;polarmin=%CF%80/4;polarmax=3%CF%80/4&amp;type=window;hsrmode=3;nomidpts=true;anaglyph=-1;center=5.382667951410254,3.9875169883799115,7.4247285467037045,1;focus=0,0,0,1;up=-0.8231816381618245,0.059896334124169365,0.5646099713534122,1;transparent=false;alpha=140;twoviews=false;unlinkviews=false;axisextension=0.7;xaxislabel=x;yaxislabel=y;zaxislabel=z;edgeson=true;faceson=true;showbox=true;showaxes=true;showticks=true;perspective=true;centerxpercent=0.5;centerypercent=0.5;rotationsteps=30;autospin=true;xygrid=false;yzgrid=false;xzgrid=false;gridsonbox=true;gridplanes=false;gridcolor=rgb(128,128,128);xmin=-2;xmax=2;ymin=-2;ymax=2;zmin=-2;zmax=2;xscale=1;yscale=1;zscale=1;zcmin=-4;zcmax=4;xscalefactor=1;yscalefactor=1;zscalefactor=1;showtraceplane=true;tracemode=0;keep2d=false;zoom=1.145333" variant="minimal"/>
        </figure>
      </subsection>
    </section>
    <section xml:id="section-vector-functions">
      <title>Vector Functions</title>
      <introduction>
        <p>
          Recall from <xref ref="subsection-equations-of-lines" text="title" /> that the equation of a line can be written as
          <me>\mathbf{r} = \mathbf{r}_{0}+t\mathbf{v} = \dotprod{x_{0}+at, y_{0}+bt, z_{0}+ct}.</me>
          This is our first example of a <term>vector function</term>. Vector functions are functions of the form
          <me>\mathbf{r}(t) = \dotprod{f(t),g(t),h(t)},</me>
          and graphs of vector functions are called <term>space curves</term>.
          We call <m>f,g,h</m> the <term>component functions</term> of <m>\mathbf{r}</m>.
          We're interested in how these curves change, which means we're interested in how to do calculus on space curves.
          Although these curves live in <m>\RR^{3}</m>, there's still only one independent variable: <m>t</m>.
          So much of what we learned in Calculus I applies to space curves.
        </p>
      </introduction>
      <subsection xml:id="limits-with-space-curves">
        <title>Limits with Space Curves</title>
        <p>
          We can take limits with vector functions just as we can with regular functions.
        </p>
        <p>
          Let <m>\mathbf{r}(t) = \dotprod{f(t),g(t),h(t)}</m>. Then
        </p>
        <men xml:id="limits-vector-functions">\lim_{t\to a}\mathbf{r}(t) = \dotprod{\lim_{t\to a}f(t),\lim_{t\to a}g(t),\lim_{t\to a}h(t)}.</men>
        <p>
          In other words, if you want to take the limit of a vector function you can just take the limits of the component functions.
        </p>
        <example xml:id="example-limit-of-a-vector-function">
          <title>Limit of a vector function</title>
          <p>
            Let
          </p>
          <me>\mathbf{r}(t) = \frac{t^{2}-1}{t-1}\mathbf{i} + \sqrt{t+8}\mathbf{j} - \frac{\sin\pi t}{\ln t}\mathbf{k}.</me>
          <p>
            Suppose we want to find <m>\lim_{t\to 1}\mathbf{r}(t)</m>. Then we just need to take the limit of each component. So
          </p>
          <me>\lim_{t\to1}\mathbf{r}(t) = 2\mathbf{i}+3\mathbf{j} -\pi\mathbf{k}.</me>
        </example>
        <p>
          Just as in Calculus I, we say that a vector function <m>\mathbf{r}(t)</m> is <term>continuous</term> at <m>t=a</m> if <m>\lim_{t\to a}\mathbf{r}(t) = \mathbf{r}(a)</m>.
          In general, a vector function is continuous wherever <em>all</em> of its components functions are continuous.
        </p>
        <example xml:id="example-a-horiztonal-helix">
          <title>A horiztonal helix</title>
          <p>
            Let <m>\mathbf{r}(t) = \dotprod{\sin\pi t, t, \cos\pi t}</m>, and suppose we want to sketch this function. One way to do so is to plug in values for <m>t</m> and connect the resulting points with a curve, but we can also do the following to get an idea of what this looks like. First, note that we have <m>x = \sin\pi t</m> and <m>z=\cos\pi t</m>. So <m>x^{2}+z^{2} = 1</m>, which means that this looks like the unit circle in the <m>xz</m>-plane, traced <em>clockwise</em>. Since we also have <m>y=t</m>, this curve moves farther along the <m>y</m>-axis as <m>t</m> increases. If we trace this out, we get a helix (see the below plot). We can also see from the graph that it has no jumps or gaps, so <m>\mathbf{r}(t)</m> is continuous everywhere.
          </p>
        </example>
        <sage>
          <input>
            # Code shamelessly adapted from this stackoverflow post: http://stackoverflow.com/questions/26989131/add-cylinder-to-plot
            import matplotlib.pyplot as plt
            import numpy as np
            from mpl_toolkits.mplot3d import Axes3D

            plt.rc('text', usetex=True)

            fig = plt.figure()
            ax = fig.add_subplot(111, projection='3d')

            # Define variables/components
            t = np.linspace(-5,5,500)
            x = np.sin(np.pi*t)
            y = t
            z = np.cos(np.pi*t)

            # Draw helix
            ax.plot(x, y, z, label=r'$\mathbf{r}(t)$')
            ax.legend()

            ax.set_xlabel(r'$x$')
            ax.set_ylabel(r'$y$')
            ax.set_zlabel(r'$z$')
            plt.show()
          </input>
        </sage>
        <example xml:id="example-finding-vector-functions">
          <title>Finding vector functions</title>
          <p>
            Consider the cylinder <m>x^{2}+y^{2}=4</m> and the surface <m>z=xy</m>, and suppose we want to trace out there intersection with a vector function. Here's how we can do this. First, we'll come up with the <m>x</m> and <m>y</m> components of <m>\mathbf{r}(t)</m>. Since <m>x^{2}+y^{2} = 4</m>, this suggests that we should take
          </p>
          <md>
            <mrow>x &amp; = 2\cos t </mrow>
            <mrow>y &amp; = 2\sin t </mrow>
          </md>
          <p>
            So that's two down, one to go. To get <m>z</m>, we just need to use the equation <m>z=xy</m>. So
          </p>
          <me>z = xy = 4\cos t\sin t.</me>
          <p>
            So our vector function is
          </p>
          <me>\mathbf{r}(t) = \dotprod{2\cos t, 2\sin t, 2\sin 2t}.</me>
          <p>
            This is also plotted below.
          </p>
        </example>
        <sage>
          <input>
            # Code shamelessly adapted from this stackoverflow post: http://stackoverflow.com/questions/26989131/add-cylinder-to-plot
            # If I change it enough it becomes MY code
            import matplotlib.pyplot as plt
            import numpy as np
            from mpl_toolkits.mplot3d import Axes3D

            plt.rc('text', usetex=True)

            fig = plt.figure()
            ax = fig.add_subplot(111, projection='3d')

            # Define variables/components
            t = np.linspace(-5,5,500)
            x = 2*np.cos(t)
            y = 2*np.sin(t)
            z = x*y

            # Draw curve
            ax.plot(x, y, z, label=r'$\mathbf{r}(t)$')
            ax.legend()

            ax.set_xlabel(r'$x$')
            ax.set_ylabel(r'$y$')
            ax.set_zlabel(r'$z$')
            plt.show()
          </input>
        </sage>
      </subsection>
      <subsection xml:id="subsection-derivatives-with-space-curves">
        <title>Derivatives with Space Curves</title>
        <p>
          Now that we know how to take limits with vector functions, we can take derivatives as well.
        </p>
        <definition xml:id="definition-derivatives-of-vector-functions">
          <title>Derivatives of Vector Functions</title>
          <idx><h>vector functions</h><h>derivatives</h></idx>
          <statement>
            <p>
              Let <m>\mathbf{r}(t)</m> denote a vector function. The <term>derivative</term> of <m>\mathbf{r}</m> is the new vector function <m>\mathbf{r}^\prime</m> given by
            </p>
            <me>\mathbf{r}^\prime(t) = \frac{d\mathbf{r}}{dt} = \lim_{h\to0}\frac{\mathbf{r}(t+h)-\mathbf{r}(t)}{h},</me>
            <p>
              assuming that the limit exists. If this limit exists, we say that <m>\mathbf{r}</m> is <term>differentiable</term>.
            </p>
          </statement>
        </definition>
        <p>
          If <m>\mathbf{r}(t) = \dotprod{f(t),g(t),h(t)},</m> then <m>\mathbf{r}</m> is differentiable if and only if <m>f,g,h</m> are, and <m>\mathbf{r}^\prime(t) = \dotprod{f'(t),g'(t),h'(t)}.</m> Just as in Calculus I, the derivative represents how quickly a space curve is changing at some value of <m>t</m>. However, derivatives of vector functions also carry information about the <em>direction</em> a curve is moving. We call <m>\mathbf{r}^\prime(t)</m> the <term>tangent vector</term> to <m>\mathbf{r}(t)</m>. In particular, <m>\mathbf{r}^\prime(t)</m> is parallel to the space curve <m>\mathbf{r}</m> at <m>t</m>, and its magnitude <m>\norm{\mathbf{r}^\prime(t)}</m> represents how quickly the curve is changing at <m>t</m>. If we only care about direction, then we can define the <term>unit tangent</term> <m>\mathbf{T}(t)</m>, which is given by
        </p>
        <me>\mathbf{T}(t) = \frac{\mathbf{r}^\prime(t)}{\norm{\mathbf{r}^\prime(t)}}.</me>
        <p>
          We also have the usual ideas from Calculus I and physics regarding motion: velocity is the derivative of position and acceleration is the derivative of velocity.
        </p>
        <example xml:id="example-velocity-on-a-saddle">
          <title>Velocity on a saddle</title>
          <p>
            A particle moves counterclockwise along the "saddle" <m>\mathbf{r}(t) = \dotprod{2\cos t, 2\sin t, 2\sin 2t}</m>. We want its velocity at <m>t=\frac{\pi}{2}</m>. First, find <m>\mathbf{r}^\prime</m> to get
          </p>
          <me>\mathbf{r}^\prime(t) = \dotprod{-2\sin t,2\cos t,4\cos2t}.</me>
          <p>
            At <m>t=\frac{\pi}{2}</m>, we have the velocity vector
          </p>
          <me>\mathbf{r}^\prime\left(\frac{\pi}{2}\right) = \dotprod{-2,0,-4}.</me>
          <p>
            So at the point <m>t=\frac{\pi}{2}</m>, the space curve is parallel to the vector <m>\dotprod{-2,0,4}</m>. In other words, the particle is moving in this direction at <m>t=\frac{\pi}{2}</m>.
          </p>
        </example>
        <figure>
          <caption>Motion along the saddle traced by <m>\vb{r}(t)</m> in <xref ref="example-velocity-on-a-saddle" text="type-global" /></caption>
          <interactive xml:id="calcplot3d-velocity-on-a-saddle" calcplot3d="type=spacecurve;spacecurve=curve;x=2cos(t);y=2sin(t);z=2sin(2t);visible=true;width=2;view=0;tmin=-10;tmax=10;tsteps=100;color=rgb(255,0,0);showtrace=true;tval=4.199999999999999;constcol=true;twod=false;arrows=0;showpt=true;trace=true;vel=true;acc=true;osc=false;k=false;repeat=false;bounce=false;dashed=false;tanline=false;dropcurtain=false;showtvector=true;shownvector=false;showbvector=false;showtnbeqs=false;showtnblabels=false;showoscplane=false;showrectplane=false;shownormplane=false;optimizecurve=true;maxjointangle=10&amp;type=window;hsrmode=3;nomidpts=true;anaglyph=-1;center=9.929061391261872,1.1887230763648262,-0.026025684742049693,1;focus=0,0,0,1;up=-0.1309608224183076,0.23562729869603305,0.962979251646021,1;transparent=false;alpha=140;twoviews=false;unlinkviews=false;axisextension=0.7;xaxislabel=x;yaxislabel=y;zaxislabel=z;edgeson=true;faceson=true;showbox=true;showaxes=true;showticks=true;perspective=true;centerxpercent=0.5;centerypercent=0.5;rotationsteps=30;autospin=true;xygrid=false;yzgrid=false;xzgrid=false;gridsonbox=true;gridplanes=false;gridcolor=rgb(128,128,128);xmin=-2;xmax=2;ymin=-2;ymax=2;zmin=-2;zmax=2;xscale=1;yscale=1;zscale=1;zcmin=-4;zcmax=4;xscalefactor=1;yscalefactor=1;zscalefactor=1;tracemode=0;keep2d=false;zoom=0.885333" variant="controls" aspect="3:2" width="90%"/>
        </figure>
        <example xml:id="example-tangents-on-a-circle">
          <title>Tangents on a circle</title>
          <p>
            A particle moves along the circle <m>y^{2}+z^{2}=5</m> in the <m>yz</m>-plane, counterclockwise and with an angular frequency of <quantity><mag>5\pi</mag><unit base="radian"/><per base="second"/></quantity>. Then we can assume that its position is described by
          </p>
          <me>\mathbf{r}(t) = \dotprod{0,\sqrt{5}\cos5\pi t, \sqrt{5}\sin5\pi t}.</me>
          <p>
            Suppose we want to find the direction this particle is going at any given moment. Then we can just find the unit tangent vector <m>\mathbf{T}</m>:
          </p>
          <me>\mathbf{T}(t) = \frac{\dotprod{0,-5\sqrt{5}\sin5\pi t, 5\sqrt{5}\cos5\pi t}}{\sqrt{125}}.</me>
        </example>
        <p>
          We also have derivative rules for vector functions, based off of the familiar formulas from Calculus I.
        </p>
        <theorem xml:id="theorem-vector-derivative-rules">
          <title>Vector Derivative Rules</title>
          <idx><h>vector functions</h><h>derivative rules</h></idx>
          <statement>
            <p>
              Let <m>\mathbf{u}</m> and <m>\mathbf{v}</m> be differentiable vector functions, <m>c</m> be a scalar and let <m>f(t)</m> be a differentiable (scalar) function. Then the following formulas hold:
            </p>
            <ol>
              <li><m>\dv{}{t}[\mathbf{u}(t)+\mathbf{v}(t)] = \mathbf{u}'(t)+\mathbf{v}'(t)</m></li>
              <li><m>\dv{}{t}[c\mathbf{u}(t)] = c\mathbf{u}^{\prime}(t)</m></li>
              <li><m>\dv{}{t}[f(t)\mathbf{u}(t)] = f^{\prime}(t)\mathbf{u}(t)+f(t)\mathbf{u}^{\prime}(t)</m></li>
              <li><m>\dv{}{t}[\mathbf{u}(t)\cdot\mathbf{v}(t)] = \mathbf{u}^{\prime}(t)\cdot\mathbf{v}(t)+\mathbf{u}(t)\cdot\mathbf{v}^{\prime}(t)</m></li>
              <li><m>\dv{}{t}[\mathbf{u}(t)\times\mathbf{v}(t)] = \mathbf{u}^{\prime}(t)\times\mathbf{v}(t)+\mathbf{u}(t)\times\mathbf{v}^{\prime}(t)</m></li>
              <li><m>\dv{}{t}\mathbf{u}(f(t)) = f^{\prime}(t)\mathbf{u}^{\prime}(f(t))</m></li>
            </ol>
          </statement>
        </theorem>
      </subsection>
      <subsection xml:id="subsection-integrals-with-space-curves">
        <title>Integrals with Space Curves</title>
        <p>
          We can also integrate vector functions without too much trouble. Just as taking the derivative of a vector function reduces down to differentiating each component, integrating a vector function reduces down to integrating each component. If <m>\mathbf{r}(t) = \dotprod{f(t),g(t),h(t)},</m> then
        </p>
        <men xml:id="equation-vector-function-integration">\int_{a}^{b}\mathbf{r}(t)\,dt = \dotprod{\int_{a}^{b}f(t)\,dt,\int_{a}^{b}g(t)\,dt,\int_{a}^{b}h(t)\,dt}.</men>
      </subsection>
    </section>
    <section xml:id="section-arc-length-and-curvature">
      <title>Arc Length and Curvature</title>
      <subsection xml:id="subsection-arc-length">
        <title>Arc Length</title>
        <p>
          Suppose some particle travels along the space curve given by <m>\mathbf{r}(t)</m> for <m>a\leq t\leq b</m>. What we'd like to do is determine how far the particle travels over this time interval. Recall that distance is just speed multiplied by time, and the speed of this particle is given by <m>\norm{\mathbf{r}^\prime(t)}</m>. So we can imagine that the distance traveled by this particle over some infinitesimal time interval <m>dt</m> to be given by <m>\norm{\mathbf{r}^\prime(t)}\,dt</m>. So adding up all of these distances from <m>t=a</m> to <m>t=b</m> should give us the arc length. This suggests (but does not prove!) the following formula for arc length:
        </p>
        <men xml:id="equation-arc-length-formula">L = \int_{a}^{b}\norm{\mathbf{r}^\prime(t)}\,dt.</men>
        <p>
          <xref ref="equation-arc-length-formula" text="type-global" /> gives the length <m>L</m> of the space curve <m>\mathbf{r}(t)</m> from <m>t=a</m> to <m>t=b</m>, assuming that the integral exists.
        </p>
        <example xml:id="example-arc-length-of-a-helix">
          <title>Arc length of a helix</title>
          <p>
            Suppose we want to find the arc length of the helix <m>\mathbf{r}(t) = \dotprod{\cos 3t,\sin 3t, t}</m> from <m>t=0</m> to <m>t=1</m>. Then this is given by
          </p>
          <me>L = \int_{0}^{1}\norm{\dotprod{-3\sin3t, 3\cos3t, 1}}\,dt = \int_{0}^{1}\sqrt{10}\,dt = \sqrt{10}.</me>
        </example>
        <p>
          One thing we'd like to do now is to parametrize a space curve <m>\mathbf{r}(t)</m> with respect to arc length. Here's what we mean by this: given some <m>\mathbf{r}(t)</m> with <m>a\leq t\leq b</m>, we define its <term>arc length function</term> <m>s(t)</m> by
        </p>
        <me>s(t) = \int_{a}^{t}\norm{\mathbf{r}^\prime(u)}\,du.</me>
        <p>
          If we can then solve for <m>t</m> in terms of <m>s</m>, this parametrizes the curve <m>\mathbf{r}(t)</m> in terms of the arc length variable <m>s</m>.
        </p>
        <example xml:id="example-reparametrizing-a-space-curve">
          <title>Reparametrizing a space curve</title>
          <p>
            Suppose we're given the space curve
          </p>
          <me>\mathbf{r}(t) = \left(\frac{2}{t^{2}+1}-1\right)\mathbf{i}+\frac{2t}{t^{2}+1}\mathbf{j}</me>
          <p>
            which starts at <m>(1,0)</m>, (so <m>t</m> starts at <m>0</m>) and we want to find the point that is <m>\frac{\pi}{2}</m> units along the curve in the positive direction. Then we can do this by reparametrizing the curve using arc length. Here's how. First, we find the arc length function <m>s(t)</m>:
          </p>
          <md>
            <mrow>s(t) &amp; = \int_{0}^{t}\norm{\mathbf{r}^\prime(u)}\,du </mrow>
            <mrow> &amp; = \int_{0}^{t} \sqrt{\frac{4u^{2}+4(u^{2}+1)^{2}-16u^{2}(u^{2}+1)+16u^{4}}{(u^{2}+1)^{4}}}\,du </mrow>
            <mrow> &amp; = \int_{0}^{t} \frac{2}{u^{2}+1}\,du </mrow>
            <mrow> &amp; = 2\tan^{-1}t </mrow>
          </md>
          <p>
            Since <m>s = 2\tan^{-1}t</m>, we get <m>t = t(s) = \tan\frac{s}{2}</m>. So
          </p>
          <me>\mathbf{r}(t(s)) = \left(\frac{2}{\tan^{2}\frac{s}{2}+1}-1\right)\mathbf{i}+\frac{2\tan\frac{s}{2}}{\tan^{2}\frac{s}{2}+1}\mathbf{j}</me>
          <p>
            reparametrizes the space curve <m>\mathbf{r}</m> in terms of arc length. So the point on the curve that is <m>\frac{\pi}{2}</m> units along in the positive direction is given by
          </p>
          <me>\mathbf{r}(t(\pi/2)) = \dotprod{0,1}.</me>
        </example>
        <sage>
          <input>
            # Code shamelessly adapted from this stackoverflow post: http://stackoverflow.com/questions/26989131/add-cylinder-to-plot
            # If I change it enough it becomes MY code
            import matplotlib.pyplot as plt
            import numpy as np
            from mpl_toolkits.mplot3d import Axes3D

            plt.rc('text', usetex=True)

            fig = plt.figure()
            ax = fig.add_subplot(111)

            # Define variables/components
            t = np.linspace(-5,5,500)
            x = 2/(t^2+1) - 1
            y = 2*t/(t^2+1)

            # Draw curve
            ax.plot(x, y, label=r'$\mathbf{r}(t)$')
            ax.legend()

            ax.set_xlabel(r'$x$')
            ax.set_ylabel(r'$y$')
            plt.show()
          </input>
        </sage>
      </subsection>
      <subsection xml:id="subsection-curvature">
        <title>Curvature</title>
        <p>
          What we want to do now is measure how much a curve "turns" at some point. First, we call a space curve <m>\mathbf{r}(t)</m> <term>smooth</term> on some interval <m>I</m> if <m>\mathbf{r}^\prime(t)\neq0</m> for any <m>t</m> in <m>I</m>. Now, if we want to measure how quickly a curve is changing direction then we can use the unit tangent vector <m>\mathbf{T}(t)</m> to measure this. In particular, the derivative of the unit tangent should provide a good measure of how quickly a curve turns. However, we don't want to let the specific parametrization of the curve affect this; in other words, the rate at which a curve is turning should not depend on the speed at which the curve is traveled. This leads to the following definition.
        </p>
        <definition xml:id="definition-curvature">
          <idx><h>vector functions</h><h>curvature</h></idx>
          <title>Curvature</title>
          <statement>
            <p>
              Let <m>\mathbf{r}(t)</m> denote a smooth curve on some interval <m>I</m>. The <term>curvature</term> of <m>\mathbf{r}(t)</m> on <m>I</m> is defined to be the function <m>\kappa(t)</m> given by
            </p>
            <me>\kappa(t) = \frac{\norm{\mathbf{T}'(t)}}{\norm{\mathbf{r}^\prime(t)}},</me>
            <p>
              where <m>\mathbf{T}(t) = \frac{\mathbf{r}^\prime(t)}{\norm{\mathbf{r}^\prime(t)}}</m> is the unit tangent to the curve.
            </p>
          </statement>
        </definition>
        <example xml:id="example-computing-a-curvature">
          <title>Computing a curvature</title>
          <p>
            Consider the curve <m>\mathbf{r}(t) = \dotprod{t,\frac{1}{2}t^{2},t^{2}}.</m> We'll try to find the curvature by making use of <xref ref="definition-curvature" text="type-global" />. First, we need to find <m>\mathbf{T}</m> so we can take its derivative:
          </p>
          <me>\mathbf{T}(t) = \frac{\dotprod{1,t,2t}}{\sqrt{1+t^{2}+4t^{2}}}.</me>
          <p>
            Therefore
          </p>
          <md>
            <mrow>\mathbf{T}^\prime(t) &amp; = -\frac{1}{2}(1+5t^{2})^{-3/2}(10t)\dotprod{1,t,2t} + (1+5t^{2})^{-1/2}\dotprod{0,1,2} </mrow>
            <mrow> &amp; = -5t(1+5t^{2})^{-3/2}\dotprod{1,t,2t} + (1 + 5t^{2})^{-1/2}\dotprod{0,1,2}. </mrow>
            <mrow> &amp; = (1+5t^{2})^{-3/2}\dotprod{-5t,1,2} </mrow>
          </md>
          <p>
            So the curvature is given by
          </p>
          <md>
            <mrow>\kappa(t) &amp; = \frac{(1+5t^{2})^{-3/2}\sqrt{25t^{2}+5}}{(1+5t^{2})^{1/2}} </mrow>
            <mrow> &amp; = \sqrt{5}(1+5t^{2})^{-3/2} </mrow>
          </md>
        </example>
        <example xml:id="example-using-curvature">
          <title>Using curvature</title>
          <p>
            Consider the curve <m>\mathbf{r}(t) = \dotprod{t,\frac{1}{2}t^{2},t^{2}}</m> once again. We'll try to find where this curve turns the fastest. To do this, we look at the curvature <m>\kappa(t)</m> we found from <xref ref="example-computing-a-curvature" text="type-global" />:
          </p>
          <me>\kappa(t) = \sqrt{\frac{5}{(1+5t^{2})^{3}}}.</me>
          <p>
            This curve is turning the fastest precisely where the curvature is largest, and this happens at <m>t=0</m>.
          </p>
        </example>
        <p>
          We can use <xref ref="definition-curvature" text="type-global" /> to compute curvatures, but we've seen that it can be pretty awful. So we'd like to use another formula if we can; thankfully, there is another option.
        </p>
        <theorem xml:id="theorem-alternative-curvature-formula">
          <idx><h>vector functions</h><h>curvature</h><h>alternative formula</h></idx>
          <title>Alternative Curvature Formula</title>
          <statement>
            <p>
              The curvature of <m>\mathbf{r}(t)</m> in <m>\RR^{3}</m> is given by
            </p>
            <me>\kappa(t) = \frac{\norm{\mathbf{r}^{\prime}(t)\times\mathbf{r}''(t)}}{\norm{\mathbf{r}^{\prime}(t)}^{3}}.</me>
          </statement>
        </theorem>
        <p>
          The formula in <xref ref="theorem-alternative-curvature-formula" text="type-global" /> may look worse than the formula given in <xref ref="definition-curvature" text="type-global" />, but it has one significant advantage: we don't need to differentiate any magnitudes, which is required in the previous formula to compute <m>\mathbf{T}^\prime(t)</m>.
        </p>
        <example xml:id="example-using-the-alternative-formula">
          <title>Using the alternative formula</title>
          <statement>
            <p>
              Let <m>\mathbf{r}(t) = t\mathbf{i}+t^{2}\mathbf{j}+e^{t}\mathbf{k}</m>. We'll make use of <xref ref="theorem-alternative-curvature-formula" text="type-global" /> to find <m>\kappa(t).</m> We have
            </p>
            <md>
              <mrow>\mathbf{r}^\prime(t) &amp; = \dotprod{1,2t,e^{t}} </mrow>
              <mrow>\mathbf{r}''(t) &amp; = \dotprod{0,2,e^{t}} </mrow>
            </md>
            <p>
              and so
            </p>
            <me>\kappa(t) = \frac{\norm{\dotprod{2e^{t}(t-1),-e^{t},2}}}{\norm{\dotprod{1,2t,e^{t}}}^{3}} = \frac{\sqrt{4e^{2t}(t-1)^{2}+e^{2t}+4}}{(1+4t^{2}+e^{2t})^{3/2}}.</me>
          </statement>
        </example>
      </subsection>
      <subsection xml:id="subsection-normal-and-binormal-vectors">
        <title>Normal and Binormal Vectors</title>
        <p>
          Consider a curve <m>\mathbf{r}(t)</m>. Then the direction of the curve is given by the unit tangent vector <m>\mathbf{T}(t) = \frac{\mathbf{r}^\prime(t)}{\norm{\mathbf{r}^\prime(t)}}</m>. If we differentiate <m>\mathbf{T}(t)</m> to get <m>\mathbf{T}^{\prime}(t)</m>, we can view this vector as telling us the direction the curve is turning. This leads us to the concept of <term>unit normal vectors</term> to a space curve.
        </p>
        <definition xml:id="definition-unit-normal-vectors">
          <idx><h>vector functions</h><h>unit normal vector</h></idx>
          <title>Unit Normal Vectors</title>
          <statement>
            <p>
              Consider a space curve given by <m>\mathbf{r}(t)</m>. The unit normal vector is the vector <m>\mathbf{N}(t)</m> given by
            </p>
            <me>\mathbf{N}(t) = \frac{\mathbf{T}'(t)}{\norm{\mathbf{T}'(t)}},</me>
            <p>
              where <m>\mathbf{T}^{\prime}</m> is the derivative of the unit tangent vector.
            </p>
          </statement>
        </definition>

        <example xml:id="example-unit-normal-on-a-circle">
          <title>Unit normal on a circle</title>
          <statement>
            <p>
              Find the unit normal vector of the curve given by <m>\mathbf{r}(t) = \dotprod{\cos t,\sin t}</m>.
            </p>
          </statement>
          <solution>
            <p>
              If we think of a particle moving along <m>\mathbf{r}(t)</m>, then this particle is just moving along the unit circle. So at every point along this path, the particle should be turning toward the origin in order to stay on the unit circle. So at all points of the curve, <m>\mathbf{N}(t)</m> should point towards the origin. To prove this, we'll use the formula above to find the unit normal:
            </p>
            <md>
              <mrow>\mathbf{N}(t) &amp; = \frac{\mathbf{T}'(t)}{\norm{\mathbf{T}'(t)}} </mrow>
              <mrow> &amp; = \frac{\dotprod{-\cos t, -\sin t}}{1} </mrow>
            </md>
            <p>
              So <m>\mathbf{N}(t) = \dotprod{-\cos t, -\sin t} = -\mathbf{r}(t)</m>. So at every point of the circle, the unit normal points in the opposite direction of the corresponding position vector, i.e. it points towards the origin.
            </p>
          </solution>
        </example>
        <p>
          It's not clear from <xref ref="definition-unit-normal-vectors" text="type-global" />, but <m>\mathbf{N}(t)</m> is <em>always</em> orthogonal to <m>\mathbf{T}(t)</m> for any space curve/vector function <m>\mathbf{r}(t)</m>. We can use these two vectors to get another vector called the <term>binormal vector</term>.
        </p>
        <definition xml:id="definition-binormal-vector">
          <idx><h>vector functions</h><h>binormal vector</h></idx>
          <title>Binormal Vector</title>
          <statement>
            <p>
              Let <m>\mathbf{r}(t)</m> be a vector function with unit tangent <m>\mathbf{T}(t)</m> and unit normal <m>\mathbf{N}(t)</m>. Then the unit binormal vector is the vector <m>\mathbf{B}(t)</m> given by
            </p>
            <me>\mathbf{B}(t) = \mathbf{T}(t)\times\mathbf{N}(t).</me>
          </statement>
        </definition>
      </subsection>
    </section>
    <section xml:id="section-motion-in-space">
      <title>Motion in Space</title>
      <p>
        We now move on to examining motion in <m>\RR^{3}</m>. First, recall that <m>\mathbf{r}(t)</m> represents the position vector of some particle moving along a curve in space, then its velocity <m>\mathbf{t}(t)</m> and acceleration <m>\mathbf{a}(t)</m> are given by
      </p>
      <md>
        <mrow>\mathbf{v}(t) &amp; = \mathbf{r}^{\prime}(t) </mrow>
        <mrow>\mathbf{a}(t) &amp; = \mathbf{v}^{\prime}(t) = \mathbf{r}''(t) </mrow>
      </md>
      <p>
        The speed of the particle is just the magnitude of the velocity: <m>\norm{\mathbf{v}(t)}</m>.
      </p>
      <example xml:id="example-motion-of-a-projectile">
        <title>Motion of a projectile</title>
        <statement>
          <p>
            A projectile is fired out of a cannon with an initial speed of <quantity><mag>200</mag><unit base="meter"/><per base="second"/></quantity> to the west and with an angle of elevation of <m>30^{\circ}</m>. If the particle was fired from a raised platform that is <quantity><mag>50</mag><unit base="meter"/></quantity> off level ground, where does the particle land?
          </p>
        </statement>
        <solution>
          <p>
            First, we'll assume that <m>\mathbf{j}</m> points northward and <m>\mathbf{k}</m> points straight up. Let's assume that the platform is directly above the origin. If we let <m>\mathbf{r}(t)</m> denote the position (in meters) of the particle at time <m>t</m> (in seconds), then we can say that <m>\mathbf{r}_{0} = \mathbf{r}(0) = \dotprod{0,0,50}</m>. We also have
          </p>
          <md>
            <mrow>\mathbf{v}(0) &amp; = -100\sqrt{3}\mathbf{i} + 100\mathbf{k} </mrow>
            <mrow>\mathbf{a} &amp; = -9.8\mathbf{k} </mrow>
          </md>
          <p>
            We can integrate up to find the position <m>\mathbf{r}(t)</m>:
          </p>
          <me>\mathbf{v}(t) = -9.8t\mathbf{k}+\mathbf{C}</me>
          <p>
            where <m>\mathbf{C}</m> is an arbitrary constant vector. To find it, we'll use our initial condition on <m>\mathbf{v}</m>:
          </p>
          <me>\mathbf{v}(0) = \mathbf{C} = -100\sqrt{3}\mathbf{i}+100\mathbf{k}.</me>
          <p>
            So <m>\mathbf{v}(t) = -9.8t\mathbf{k}-100\sqrt{3}\mathbf{i}+100\mathbf{k}</m>. Integrating once more to get the position, we have
          </p>
          <me>\mathbf{r}(t) = -100\sqrt{3}t\mathbf{i}+(100t-4.9t^{2})\mathbf{k} + \mathbf{D} = -100\sqrt{3}t\mathbf{i} + (100t-4.9t^{2})\mathbf{k} + 50\mathbf{k}</me>.
          <p>
            So <m>\mathbf{r}(t) = \dotprod{-100\sqrt{3}t, 0, 50 + 100t - 4.9t^{2}}</m>.
          </p>
          <p>
            To find where the particle lands, we just set the third component equal to zero and solve for <m>t</m> to get
          </p>
          <me>t = \frac{-100\pm\sqrt{10000+980}}{-9.8} = -.4883,20.896.</me>
          <p>
            We need to choose the positive value for <m>t</m>, and if we do so we see that when the projectile hits ground it's at position <m>\mathbf{r}(20.896) = \dotprod{-3619.38,0,0}.</m> So the projectile is a little over <quantity><mag>3.5</mag><unit base="meter" prefix="kilo"/></quantity> to the west.
          </p>
        </solution>
      </example>
      <p>
        To describe acceleration on a curve <m>\mathbf{r}(t)</m>, it can be useful to break it down into <term>tangential components</term> and <term>normal components</term>.
      </p>
      <definition xml:id="definition-components-of-acceleration">
        <idx><h>vector function</h><h>components of acceleration</h></idx>
        <title>Components of Acceleration</title>
        <statement>
          <p>
            Let <m>\mathbf{r}(t)</m> denote a space curve with unit tangent <m>\mathbf{T}(t)</m>, unit normal <m>\mathbf{N}(t)</m> and acceleration <m>\mathbf{a}</m>. The tangential component of acceleration is the scalar <m>a_{T}</m> given by
          </p>
          <me>a_{T} = \mathbf{a}\cdot\mathbf{T}.</me>
          <p>
            The normal component is the scalar <m>a_{N}</m> given by
          </p>
          <me>a_{N} = \mathbf{a}\cdot\mathbf{N}.</me>
        </statement>
      </definition>
      <p>
        <m>a_{T}</m> represents how much of the acceleration is directed tangent to the curve <m>\mathbf{r}(t)</m>, whereas <m>a_{N}</m> represents how much of the acceleration is directed perpendicular to the tangent.
      </p>
      <example xml:id="example-components-of-acceleration-for-a-projectile">
        <title>Components of acceleration for a projectile</title>
        <statement>
          <p>
            Consider the particle from <xref ref="example-motion-of-a-projectile" text="type-global" />. At what point is the tangential component of acceleration greatest?
          </p>
        </statement>
        <solution>
          <p>
            Since <m>\mathbf{a} = -9.8\mathbf{k}</m>, the tangential component should be greatest when the projectile is fired or when it hits the ground, since these are the points where the direction of the trajectory most closely matches the direction of acceleration. To actually verify this, we'll find the tangential component using <xref ref="definition-components-of-acceleration" text="type-global" />. Since
          </p>
          <me>\mathbf{T}(t) = \dotprod{-\frac{100\sqrt{3}}{\sqrt{(100-9.8t)^{2}+30000}}, 0, \frac{100 - 9.8t}{\sqrt{(100-9.8t)^{2}+30000}}}</me>
          <p>
            it follows that
          </p>
          <md>
            <mrow>a_{T} &amp; = \mathbf{a}\cdot\mathbf{T} </mrow>
            <mrow> &amp; =  -9.8\frac{100 - 9.8t}{\sqrt{(100-9.8t)^{2}+30000}}</mrow>
          </md>
          <p>
            So
          </p>
          <md>
            <mrow>|a_{T}| &amp; = 9.8\frac{|100 - 9.8t|}{\sqrt{(100-9.8t)^{2}+30000}} </mrow>
            <mrow> &amp; = \frac{9.8}{\sqrt{1+\frac{30000}{(100-9.8t)^{2}}}} </mrow>
          </md>
          <p>
            We can make this as large as possible by making <m>(100-9.8t)^{2}</m> as large as possible, and this reaches its largest value at <m>t = 20.896</m>, when the projectile hits the ground.
          </p>
        </solution>
      </example>
      <sage>
        <input>
          t = var('t')
          r = vector([-100*sqrt(3)*t, 0, 50 + 100*t - 4.9*t^2])
          T = derivative(r,t).normalized()
          show(T)
        </input>
      </sage>
    </section>
    <!-- I'm keeping these here for now in case I need to see how this is done later. -->
<!--     <xi:include href="./sage/integers-sage.xml" />
<xi:include href="./sage/integers-sage-exercises.xml" /> -->
</chapter>
